(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95338],{47829:function(e,n,t){"use strict";t.d(n,{H3:function(){return v},Y$:function(){return c},Zr:function(){return m},_1:function(){return s},ow:function(){return u},xQ:function(){return p}});var o=t(86807),l=t(73463),i=t(28847),r=t(328);let d=l.ZP.getInstance({baseURL:"BFF_ORDER"}),a=l.ZP.getInstance({baseURL:"BFF_ORDER_PRIVATE"});async function u(e){try{return await d.post(o.sqJ,e,{})}catch(e){return Promise.reject(e)}}async function s(e){try{return await a.post(o.FUD,e,{})}catch(e){return Promise.reject(e)}}async function c(){try{return await a.get(o.afB)}catch(e){return Promise.reject(e)}}async function v(e){try{return await d.post(o.Mjr,e,{})}catch(e){return Promise.reject(e)}}async function m(e){try{return await d.post(o.l6p,e)}catch(e){return Promise.reject(e)}}function p(e){var n;let t=null!==(n=null==e?void 0:e.filter(e=>e.isSelected))&&void 0!==n?n:[],o=!1,l=!1,d=!1,a=!1;return t.length>0&&(o=t.some(e=>e.sectorId===i.Ud.DV&&e.typeId===i.XD.SIM))&&(d=!(l=t.some(e=>e.providerCode===r.f.FPT)),l&&(a=t.some(e=>{var n;return(null===(n=e.usedForSimType)||void 0===n?void 0:n.value)===r.S.ESIM}))),{isCartHasSim:o,isCartOnlyHasOtherSim:d,isCartHasFPTSim:l,isCartHasEsimFPTSim:a}}},49244:function(e,n,t){"use strict";var o,l,i,r;t.d(n,{Cr:function(){return v},Dg:function(){return o},ER:function(){return u},JA:function(){return a},O8:function(){return c},Pv:function(){return l},Tw:function(){return m},VZ:function(){return d},WQ:function(){return s},wR:function(){return p}});let d=16,a={1:"Đặt h\xe0ng",2:"Đặt cọc",3:"Mua h\xe0ng"},u={order:1,deposit:2,Purchase:3},s={rules:"rules",gameRules:"countGame",orderRules:"orderRules",depositRules:"depositRules",countInfo:"countInfo"},c=100,v=[{categoriesName:"ĐTDĐ",productTypeName:"ĐTDĐ-ĐTDĐ",displayName:"Số suất Điện thoại h\xe3ng kh\xe1c c\xf2n lại:"},{categoriesName:"Apple",productTypeName:"ĐTDĐ-Apple",displayName:"Số suất Điện thoại Apple c\xf2n lại:"},{categoriesName:"MTB",productTypeName:"MTB-MTB",displayName:"Số suất M\xe1y t\xednh bảng h\xe3ng kh\xe1c c\xf2n lại:"},{categoriesName:"Apple",productTypeName:"MTB-Apple",displayName:"Số suất M\xe1y t\xednh bảng Apple c\xf2n lại:"},{categoriesName:"Apple",productTypeName:"MTXT-Apple",displayName:"Số suất Macbook/iMac c\xf2n lại:"},{categoriesName:"ĐTDĐ",productTypeName:"Đồng hồ th\xf4ng minh- ĐTDĐ",displayName:"Số suất Thiết bị đeo h\xe3ng kh\xe1c c\xf2n lại:"},{categoriesName:"Apple",productTypeName:"Watch-Apple",displayName:"Số suất Apple Watch c\xf2n lại:"},{categoriesName:"MT",productTypeName:"MTXT-MT",displayName:"Số suất Laptop/PC h\xe3ng kh\xe1c c\xf2n lại:"},{categoriesName:"Điện m\xe1y",productTypeName:"Gia dụng",displayName:"Số suất Gia dụng c\xf2n lại:"},{categoriesName:"Phụ Kiện",productTypeName:null,displayName:"Số suất Phụ kiện c\xf2n lại:"},{categoriesName:"MT",productTypeName:"M\xe0n h\xecnh",displayName:"Số suất M\xe0n h\xecnh c\xf2n lại:"},{categoriesName:"DV",productTypeName:"Phần mềm-DV",displayName:"Số suất Phần mềm c\xf2n lại:"},{categoriesName:"Điện m\xe1y",productTypeName:"M\xe1y Lạnh_Điện m\xe1y",displayName:"Số suất Điện m\xe1y c\xf2n lại:"}],m={BACK_TO_SCHOOL:"BackToSchool",AEC:"AEC",EDUCATION:"Education",OTHER:"Other",ANDROID:"Android",TWO_G:"TWO_G"};(i=o||(o={}))[i.NORMAL=0]="NORMAL",i[i.PRE_ORDER=1]="PRE_ORDER",i[i.BACK_TO_SCHOOL=2]="BACK_TO_SCHOOL",i[i.SENDO=11]="SENDO",i[i.LAZADA=6]="LAZADA",i[i.TIKTOK_SHOP=13]="TIKTOK_SHOP",i[i.SOM=3]="SOM",i[i.INST_CARD=4]="INST_CARD",i[i.INST_HOME_FINANCE=5]="INST_HOME_FINANCE",i[i.SOFTWARE_LICENSE=7]="SOFTWARE_LICENSE",i[i.WARRANTY_PACKAGE=8]="WARRANTY_PACKAGE",i[i.AEC=9]="AEC",i[i.EDUCATION=10]="EDUCATION",i[i.HOTSALE=12]="HOTSALE",i[i.D2C=14]="D2C",(r=l||(l={})).REGISTER="register",r.DEPOSIT="deposit";let p=["00911048","00911052","00911056"]},14527:function(e,n,t){"use strict";t.d(n,{B5:function(){return c},EI:function(){return m},Qv:function(){return v},Ux:function(){return p},cP:function(){return s},oS:function(){return h},pE:function(){return r},qX:function(){return i}});var o,l,i,r,d=t(328),a=t(40763),u=t(28847);(o=i||(i={})).THANH_CONG="thanh-cong",o.THAT_BAI="that-bai",o.DANG_XU_LY="dang-xu-ly",o.TRA_HANG="tra-hang";let s=e=>((null==e?void 0:e.products)||[]).some(e=>(null==e?void 0:e.productType)===a.fY.SCRATCH_CARD),c=e=>((null==e?void 0:e.products)||[]).some(e=>(null==e?void 0:e.productType)===a.fY.TOPUP),v=e=>((null==e?void 0:e.products)||[]).some(e=>(null==e?void 0:e.productSector)===u.Ud.DV&&e.productType===u.XD.SIM_DULICH);(l=r||(r={})).PENDING="PENDING",l.SUCCESS="SUCCESS",l.CANCEL="CANCELED";let m="masoffer",p={MAS_OFFER:"MAS_OFFER",ACCESS_TRADE:"ACCESS_TRADE"},h=e=>{let n=!1,t=!1,o=!1,l=!1;for(let i of e){let e=i.productSector===u.Ud.DV&&i.productType===u.XD.SIM,r=i.productSector===u.Ud.DV&&i.productType===u.XD.KEY_ONLINE;if(e&&(n=!0,(null==i?void 0:i.providerCode)===d.f.FPT&&(t=!0,(null==i?void 0:i.usedForSimType)===d.S.ESIM&&(o=!0))),r&&(l=!0),n&&t&&o&&l)break}let i=n&&!t;return{isOrderHasSim:n,isOrderOnlyHasOtherSim:i,isOrderHasFPTSim:t,isOrderHasEsimFPTSim:o,isOrderHasKeyOnline:l}}},328:function(e,n,t){"use strict";var o,l,i,r;t.d(n,{S:function(){return l},f:function(){return o}}),(i=o||(o={})).FPT="FPTBSS",i.VIETTEL="VIETTEL",i.VINAPHONE="VINAPHONE",i.VIETNAMMOBILE="VIETNAMMOBILE",i.MOBIFONE="MOBIFONE",(r=l||(l={})).PHYSICAL="0",r.ESIM="1"},51319:function(e,n,t){"use strict";t.d(n,{I:function(){return i}});var o=t(27573);t(7653);var l=t(83154);function i(e){let{viewNumber:n,setViewNumber:t,totalLength:i,length:r=3}=e;return i>r&&(0,o.jsx)("div",{children:(0,o.jsxs)("button",{onClick:()=>n<i?t(i):t(3),className:"flex cursor-pointer",children:[(0,o.jsx)("span",{className:"text-textOnWhiteHyperLink b2-medium",children:n===i?"Thu gọn":"Xem th\xeam ".concat(i-3," khuyến m\xe3i kh\xe1c")}),(0,o.jsx)(l.yRp,{className:"".concat(n===i?"":"rotate-180")})]})})}},85528:function(e,n,t){"use strict";t.d(n,{O:function(){return Y},f:function(){return l}});var o,l,i=t(27573),r=t(51319),d=t(9206),a=t(40763),u=t(28847),s=t(90375),c=t(83154),v=t(21010),m=(t(13322),t(96865)),p=t(61117),h=t(83103),f=t(94029),g=t.n(f),y=t(45259),C=t.n(y),E=t(41289),I=t.n(E),N=t(44552),T=t.n(N),A=t(5298),S=t.n(A),_=t(18075),x=t.n(_),O=t(28950),P=t.n(O),b=t(92514),D=t.n(b),R=t(38433),M=t.n(R),w=t(7653),k=t(7405),L=t(88655),j=t(24945),F=t(97712),H=t(47829),V=t(72150),U=t(27432),B=t(95338),W=t(51436),Z=e=>{var n,t,o;let l;let{setAddVoucher:r,setStatusVoucher:d,setIsChangePromotion:a}=e,{cart:u,orderFormData:m,setCart:p,sessionId:h,incrementPending:f,decrementPending:g,updateCartCustomer:y,setCheckPhoneVoucher:C,clearOrderFormError:E,getCreditCartPackage:I,fetchInstallmentPackages:N,filterFinancePackage:T}=(0,s.q)(),A=window.location.href,S=(0,B.vM)(A,null!==(t=null==u?void 0:u.products)&&void 0!==t?t:[]),{profile:_}=(0,U.O)(),[x,O]=w.useState(""),[P,b]=w.useState(""),[D,R]=w.useState([]),[M,Z]=w.useState(!1),Y=F.z.object({code:F.z.string().min(1,"Th\xf4ng tin bắt buộc. Vui l\xf2ng nhập đủ.").max(255,{message:"Vui l\xf2ng nhập dưới 255 k\xfd tự"}),phone:F.z.string()});w.useEffect(()=>{null!==_&&O(_.profile.mobilePhone)},[_]);let G=async e=>{var n,t,o;J(P),e.preventDefault();let{success:l,data:s,error:v}=Y.safeParse({phone:x,code:P});if(!l){let{errors:e}=v;return R(e)}if(null==u?void 0:u.vouchers.some(e=>e.seriesCode===P))return R([{path:["code"],message:"Bạn đang sử dụng m\xe3 giảm gi\xe1 n\xe0y. Vui l\xf2ng nhập m\xe3 giảm gi\xe1 kh\xe1c",code:"custom"}]);if(""!==x&&(null===(n=m.customer)||void 0===n?void 0:n.phone)&&(null===(t=m.customer)||void 0===t?void 0:t.phone)!==x)return V.default.open({size:"small",title:(0,i.jsxs)("p",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.mVO,{className:"h-5 w-5 fill-yellow-yellow-7"}),(0,i.jsx)("span",{className:"text-yellow-yellow-7 b1-semibold",children:"Warning"})]}),children:(0,i.jsx)("div",{className:"border-t border-neutral-gray-1 p-4",children:(0,i.jsx)("p",{children:"Vui l\xf2ng nhập số điện thoại tr\xf9ng với số điện thoại người đặt h\xe0ng"})})});Z(!0),R([]),f();let A={sessionId:null!=h?h:"",orderType:null!=S?S:1,phoneNumber:null==m?void 0:null===(o=m.customer)||void 0===o?void 0:o.phone,seriesCodes:[s.code],phoneForSeriesCode:x,type:"ADDED"};(0,H.ow)(A).then(e=>{e&&(a(!0),(""!==x||e.data.vouchers.some(e=>{var n,t;return(null==e?void 0:e.phoneNumber)==="84".concat(null==m?void 0:null===(t=m.customer)||void 0===t?void 0:null===(n=t.phone)||void 0===n?void 0:n.slice(-9))}))&&C(!0),""!==x&&(y({phone:x}),E(["phone"])),p(e.data),r(!1),d({type:"success",status:!0,statusText:"Đ\xe3 \xe1p dụng th\xe0nh c\xf4ng m\xe3 giảm gi\xe1"}),setTimeout(()=>{d({type:"",status:!1,statusText:""})},1e3),(null==m?void 0:m.customer)&&u&&((0,k.yE)(null==m?void 0:m.customer,u,I),(0,k.V0)(y,null==m?void 0:m.customer,T,N)))}).catch(e=>{var n,t;d({type:"error",status:!0,statusText:null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.error)||void 0===n?void 0:n.message}),setTimeout(()=>{d({type:"",status:!1,statusText:""})},1500)}).finally(()=>{g(),Z(!1)})},{sendTracking:K}=(0,W.a8)(),J=e=>{K(W.W1.CLICK_CONFIRM,{value:e,location_name:"discount_code",location_type:"button"})};return(0,i.jsxs)("form",{className:"flex h-full w-full flex-col justify-between bg-bgWhiteDefault",children:[(0,i.jsxs)("div",{className:"ml-4 mr-8 mt-3 flex flex-col gap-3",children:[(0,i.jsxs)("div",{className:"flex cursor-pointer",onClick:()=>r(!1),children:[(0,i.jsx)(c.ubB,{}),(0,i.jsx)("div",{className:"text-textOnWhiteHyperLink b2-medium",children:"Trở về"})]}),(0,i.jsxs)("div",{className:"flex max-w-full flex-col gap-3 py-2",children:[(0,i.jsx)(j.Z,{size:"medium",value:P,required:!0,placeholder:"Nhập m\xe3 giảm gi\xe1",labelText:"M\xe3 giảm gi\xe1",helperText:(l=null!==(o=null===(n=D.find(e=>"code"===e.path[0]))||void 0===n?void 0:n.message)&&void 0!==o?o:"",(0,i.jsx)(i.Fragment,{children:l&&(0,i.jsx)(L.Z,{text:l,status:"error",className:"mt-1 transition-opacity duration-500 ease-in-out"})})),onChange:e=>b(e),status:D.some(e=>"code"===e.path[0])?"error":"default"}),null===_&&(0,i.jsx)(j.Z,{size:"medium",value:x,placeholder:"Nhập số điện thoại",labelText:"Số điện thoại để x\xe1c minh",onChange:e=>O(e)})]})]}),(0,i.jsx)("div",{className:"rounded-t-2xl bg-bgWhiteDefault p-4",style:{boxShadow:"0px 2px 24px 0px rgba(0, 0, 0, 0.08), 0px 28px 32px 1px rgba(0, 0, 0, 0.12)"},children:(0,i.jsx)(v.default,{className:"h-full w-full rounded-2 py-3 text-textOnSpecialPrimary b2-medium",type:"submit",onClick:G,loading:M,disabled:M,children:"X\xe1c nhận"})})]})};function Y(e){var n,t,o,l,f,y;let{setOpenPromotion:E,openPromotion:N}=e,{sessionId:A,orderFormData:_,cart:O,cartProgress:b,postSelectPromotion:R,incrementPending:L,updateCartCustomer:j,fetchPaymentMethods:F}=(0,s.q)(),H=null==O?void 0:null===(n=O.products)||void 0===n?void 0:n.some(e=>e.isAllowPreOrder&&e.isSelected),V=null===(t=_.customer)||void 0===t?void 0:t.selectedPaymentMethodId,U=()=>{var e;if(V&&([u.x8.KREDIVO,u.x8.HOME_PAYLATER,u.x8.INSTALLMENT_MOMO].includes(V)&&(null==_?void 0:null===(e=_.customer)||void 0===e?void 0:e.orderType)===a.Jm.TRAGOP||[u.x8.INSTALLMENT_CARD,u.x8.FINANCE].includes(V)))return!0},B=(0,h.ac)("mb"),Y=((0,w.useRef)(null),(0,w.useRef)()),[G,K]=(0,w.useState)(!1),[J,X]=(0,w.useState)([]),[z,Q]=(0,w.useState)([]),[q,$]=(0,w.useState)(3),[ee,en]=(0,w.useState)(3),[et,eo]=(0,w.useState)([]),[el,ei]=(0,w.useState)(""),[er,ed]=(0,w.useState)("all"),[ea,eu]=(0,w.useState)(!1),[es,ec]=(0,w.useState)({type:"",status:!1,statusText:""}),[ev,em]=(0,w.useState)(!1),ep=e=>x()(e,function(e,n){var t,o;return e.push({isAllowSelect:n.isAllowSelect,code:n.code,detail:n.description,labelPromotion:n.displayName,statusCode:n.statusCode,ofProductId:n.ofProductId,ofProductName:n.ofProductName,paymentMethodName:n.paymentMethodName,paymentMethodCode:n.paymentMethodCode,defaultCheck:JSON.stringify({code:null!==(t=n.code)&&void 0!==t?t:"",ofProductId:null!==(o=n.ofProductId)&&void 0!==o?o:""})}),e},[]),eh=S()(null==O?void 0:O.paymentPromotions,e=>({key:e.paymentMethodCode,label:e.paymentMethodCode===u.x8.HOME_PAYLATER?"Home PayLater":e.paymentMethodCode===u.x8.ALEPAY?"Thẻ t\xedn dụng":e.paymentMethodName})),ef=([...(null==O?void 0:O.paymentPromotions)?M()(I()(eh,e=>""!==e.label),"key"):[]],e=>P()(et,n=>n==e.defaultCheck)?I()(et,n=>n!==e.defaultCheck):[...et,e.defaultCheck]),eg=e=>{var n,t;let{promotionsCode:o,paymentPromotionCode:l}=e;Y.current&&Y.current.abort("aborted"),Y.current=new AbortController;let i=Y.current.signal,r=(null==O?void 0:O.promotions)&&ep(O.promotions),d=(null==O?void 0:O.paymentPromotions)&&ep(O.paymentPromotions),u=null;el!==l&&l?u=JSON.parse(l):el&&o&&(u=JSON.parse(el));let s=T()(d,e=>"USED"===e.statusCode),c={orderType:null!==(t=null==_?void 0:null===(n=_.customer)||void 0===n?void 0:n.orderType)&&void 0!==t?t:a.Jm.TAISHOP,promotions:[...S()(null!=o?o:et,e=>{let n=JSON.parse(e);return{productId:n.ofProductId,code:n.code,status:"USED"}}),...S()(C()(r,null!=o?o:et,(e,n)=>e.defaultCheck===n),e=>({productId:e.ofProductId,code:e.code,status:"NOT_USED"})),...u?[{productId:u.ofProductId,code:null==u?void 0:u.code,status:"USED"}]:[],...s?[{productId:null==s?void 0:s.ofProductId,code:null==s?void 0:s.code,status:"NOT_USED"}]:[]]};g()(R,500)(c,{setLoading:K},i),em(!0)},ey=()=>{var e,n,t;if(G&&L(),b===u.Es.CONFIRM_ORDER&&ev&&(null==_?void 0:null===(e=_.customer)||void 0===e?void 0:e.orderType)===a.Jm.TAISHOP){F({sessionId:A,orderType:H?a.Jm.PRE_ORDER:null!==(t=null==_?void 0:null===(n=_.customer)||void 0===n?void 0:n.orderType)&&void 0!==t?t:a.Jm.TAISHOP}).then(()=>{E(!1)});return}E(!1)};(0,w.useEffect)(()=>{let e=(null==O?void 0:O.promotions)&&ep(O.promotions),n=(null==O?void 0:O.paymentPromotions)&&ep(O.paymentPromotions);if(e){let n=I()(e,e=>"USED"===e.statusCode);eo(S()(n,"defaultCheck")),X(e)}if(n){var t;let e=T()(n,e=>"USED"===e.statusCode);ei(null!==(t=null==e?void 0:e.defaultCheck)&&void 0!==t?t:""),Q(n)}},[null==O?void 0:O.paymentPromotions,null==O?void 0:O.promotions]),(0,w.useEffect)(()=>(N&&($(null==J?void 0:J.length),en(null==z?void 0:z.length)),()=>em(!1)),[N]),null==O||null===(o=O.products)||void 0===o||o.some(e=>e.isSelected&&(null==e?void 0:e.sectorId)===u.Ud.DV&&e.typeId===u.XD.SIM);let{sendTracking:eC}=(0,W.a8)(),eE=()=>{eC(W.W1.ADD_PROMO_CODE,{location_type:"sidepanel",location_name:"promotion_detail"})},eI=()=>{let e=[];if(et.length&&et.map(n=>{let t=JSON.parse(n);e.push(t.code)}),el){let n=JSON.parse(el);e.push(n.code)}eC(W.W1.CLICK_CONFIRM,{value:e.toString(),location_name:"promotion_detail",location_type:"button"})};return(0,i.jsx)(m.Z,{showSheet:N,placement:B?"down":"right",setShowSheet:ey,onClickClose:()=>{eC(W.W1.CLICK_CLOSE,{location_name:ea?"discount_code":"promotion_detail",location_type:"sidepanel"})},titleSheet:(0,i.jsx)("span",{className:"text-textOnWhitePrimary h5-20-semibold pc:h6-semibold",children:"Khuyến m\xe3i v\xe0 ưu đ\xe3i"}),width:B?"100%":600,height:B?"90%":"100%",children:(0,i.jsxs)("div",{className:"relative h-full",children:[es.status&&(0,i.jsxs)("div",{className:"absolute left-[50%] top-[25%] flex animate-fadein gap-2 rounded-2 bg-black-opacity-100 px-3 py-2",style:{transform:"translate(-50%, 0)",zIndex:100},children:[(0,i.jsx)("div",{children:"success"===es.type?(0,i.jsx)(c.z_l,{}):(0,i.jsx)(c.QqV,{})}),(0,i.jsx)("div",{className:"text-textOnSpecialPrimary b2-medium",children:es.statusText})]}),ea?(0,i.jsx)(Z,{setAddVoucher:eu,setStatusVoucher:ec,setIsChangePromotion:em}):(0,i.jsxs)("div",{className:"grid gap-2 bg-bgGrayDefault",children:[(0,i.jsxs)("div",{className:"h-[calc(100vh_-_264px)] overflow-y-scroll bg-bgGrayDefault scrollbar-none pc:h-[calc(100vh_-_169px)]",children:[(0,i.jsxs)("div",{className:"grid gap-2 px-4 py-3",children:[(0,i.jsx)("span",{className:"text-textOnWhitePrimary b2-medium",children:"M\xe3 giảm gi\xe1"}),(0,i.jsxs)("div",{className:" flex cursor-pointer items-center gap-2 rounded-2 bg-bgWhiteDefault py-2 pl-3 pr-2",onClick:()=>{eE(),eu(!0)},children:[(0,i.jsx)(c.uhn,{}),(0,i.jsx)("span",{className:"w-full  text-textOnWhitePrimary b2-regular",children:"Nhập m\xe3 giảm gi\xe1 của bạn tại đ\xe2y nh\xe9"}),(0,i.jsx)(c.Eld,{})]}),(0,i.jsx)(k.ZP,{setStatusVoucher:ec,setIsChangePromotion:em})]}),(null==J?void 0:J.length)>0&&(0,i.jsxs)("div",{className:"grid gap-2 px-4 py-3",children:[(0,i.jsx)("span",{className:"text-textOnWhitePrimary b2-medium",children:"Khuyến m\xe3i"}),S()(D()(J,q),e=>(0,i.jsx)(d.D,{onClick:()=>{e.isAllowSelect&&!U()&&(eo(ef(e)),eg({promotionsCode:ef(e)}))},keyPromotionCard:null==e?void 0:e.defaultCheck,labelPromotion:e.labelPromotion,detail:e.ofProductName&&"\xc1p dụng cho ".concat(e.ofProductName),description:null==e?void 0:e.detail,view:!0,isAllowSelect:e.isAllowSelect,action:(0,i.jsx)("button",{className:"flex h-[24px] w-[24px] items-center justify-center rounded-full ".concat(e.isAllowSelect&&!U()?"cursor-pointer bg-red-red-2":"cursor-not-allowed bg-iconOnWhiteDisable"),children:P()(et,n=>n===e.defaultCheck)?(0,i.jsx)(c.ayY,{}):(0,i.jsx)(c.c34,{color:e.isAllowSelect?"#DC2626":"#FFFFFF"})})},e.code)),(0,i.jsx)(r.I,{setViewNumber:$,viewNumber:q,totalLength:null==J?void 0:J.length})]}),!1]}),(0,i.jsxs)("div",{className:"flex flex-col justify-end bg-bgWhiteDefault",children:[(0,i.jsx)("div",{className:"flex h-11 justify-between border-b border-neutral-gray-2 px-4 py-3",children:(0,i.jsxs)("span",{className:"flex items-center text-textOnWhitePrimary b2-medium",children:["Đ\xe3 chọn"," ",(null!==(y=null==et?void 0:et.length)&&void 0!==y?y:0)+(el?1:0)," ","khuyến m\xe3i v\xe0 ưu đ\xe3i"]})}),(0,i.jsxs)("div",{className:"flex h-[70px] gap-2 px-4 py-3",children:[(0,i.jsxs)("div",{className:"h-[46px] w-1/2",children:[(0,i.jsx)("span",{className:"text-textOnWhiteBrand h6-semibold",children:(0,p.oH)(null==O?void 0:null===(l=O.calculatorPrice)||void 0===l?void 0:l.principalAmountAfterPromotion)}),(0,i.jsxs)("div",{className:"flex h-[18px] gap-0.5 f1-medium",children:[(0,i.jsx)("span",{className:"text-textOnWhitePrimary",children:"Tiết kiệm"}),(0,i.jsx)("span",{className:"text-textOnWhiteBrand",children:(0,p.oH)(null==O?void 0:null===(f=O.calculatorPrice)||void 0===f?void 0:f.totalDiscount)})]})]}),(0,i.jsx)(v.default,{backgroundColor:"red-primary",size:"small",variant:"square",className:"w-[145px] flex-1 b1-medium",onClick:()=>{eI(),ey()},children:"X\xe1c nhận"})]})]})]})]})})}(o=l||(l={})).NOT_USED="NOT_USED",o.USED="USED",o.NOT_AFFORD="NOT_AFFORD"},9206:function(e,n,t){"use strict";t.d(n,{D:function(){return r}});var o=t(27573),l=t(7653),i=t(20266);function r(e){var n,t;let{keyPromotionCard:r,labelPromotion:d,detail:a,action:u,view:s=!1,isAllowSelect:c=!1,description:v,onClick:m}=e,[p,h]=(0,l.useState)(!1),f=null!==(t=null===(n=document.getElementById("promotion-card-".concat(r)))||void 0===n?void 0:n.offsetHeight)&&void 0!==t?t:null;return(0,l.useEffect)(()=>{f||h(!p)},[f]),s&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{onClick:e=>{e.preventDefault(),c&&m()},id:"promotion-card-".concat(r),className:"".concat(c?"cursor-pointer":"cursor-not-allowed","  relative z-10 flex"),children:[(0,o.jsxs)("div",{className:"flex h-fit w-full gap-2 rounded-l-2 bg-bgWhiteDefault p-2",children:[(0,o.jsx)("div",{className:"flex h-11 min-w-11 items-center justify-center rounded-[48px] bg-red-red-2",children:(0,o.jsx)(i.Z,{})}),(0,o.jsxs)("div",{className:"grid w-full",children:[(0,o.jsx)("span",{className:"f1-semibold ".concat(c?"text-textOnWhitePrimary":"text-textOnWhiteDisable"),children:d}),(0,o.jsx)("span",{className:"truncate f2-regular ".concat(c?"text-textOnWhiteSecondary":"text-textOnWhiteDisable"),children:a})]})]}),(0,o.jsxs)("div",{className:"relative flex w-[47px] items-center justify-center rounded-r-2 border-l border-dashed border-bgGrayDefault bg-bgWhiteDefault",children:[(0,o.jsx)("div",{className:"absolute left-[-6px] top-[-6px] h-2.5 w-2.5 rounded-full bg-bgGrayDefault"}),(0,o.jsx)("div",{className:"absolute bottom-[-6px] left-[-6px] h-2.5 w-2.5 rounded-full bg-bgGrayDefault"}),u,(0,o.jsx)("div",{className:"absolute right-[-3px] top-2 grid",children:f&&[...Array(parseInt(String((f-16)/7)))].map((e,n)=>(0,o.jsx)("div",{className:"mb-[1px] h-1.5 w-1.5 rounded-full bg-bgGrayDefault"},r+(null==n?void 0:n.toString())))})]})]},r),v&&(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute right-[20px] z-20 h-1.5 w-20 bg-neutral-gray-2"}),(0,o.jsx)("p",{className:"relative top-[-6px] z-1 w-full rounded-b-2 bg-neutral-gray-2 px-3 pb-1.5 pt-3 text-textOnWhiteSecondary f2-regular",children:v})]})]})}},7405:function(e,n,t){"use strict";t.d(n,{V0:function(){return C},yE:function(){return y}});var o=t(27573),l=t(47829),i=t(90375),r=t(27432),d=t(7653),a=t(9206),u=t(83154),s=t(51319),c=t(5298),v=t.n(c),m=t(92514),p=t.n(m),h=t(95338),f=t(40763),g=t(28847);function y(e,n,t){var o;let l=(null==e?void 0:e.selectedPaymentMethodId)&&[g.x8.INSTALLMENT_CARD,g.x8.HOME_PAYLATER,g.x8.KREDIVO].includes(null==e?void 0:e.selectedPaymentMethodId);if(!(null==n?void 0:null===(o=n.installment)||void 0===o?void 0:o.package)||!l)return;let i=(null==e?void 0:e.bankId)?null==e?void 0:e.bankId:0,r=(null==e?void 0:e.typeCardId)?null==e?void 0:e.typeCardId:0;t({storeType:f.uV.F_SHOP,bankInfo:{pinCode:"",bankId:+i,cardId:+r,bankCode:null==e?void 0:e.bankCode,typeCard:null==e?void 0:e.typeCard}})}function C(e,n,t,o){let l=(null==n?void 0:n.selectedPaymentMethodId)===g.x8.INSTALLMENT_MOMO;((null==n?void 0:n.selectedPaymentMethodId)&&[g.x8.FINANCE].includes(null==n?void 0:n.selectedPaymentMethodId)||l)&&o({financierOptions:{companyId:l?g.Yy.MOMO:null==t?void 0:t.companyId,prePayPercent:null==t?void 0:t.prePayPercent,term:null==t?void 0:t.term}}).then(n=>{if(n){var t,o;let l=null==n?void 0:null===(o=n.cart)||void 0===o?void 0:null===(t=o.installment)||void 0===t?void 0:t.package;e({installmentAmount:null==l?void 0:l.prePaymentAmount})}})}n.ZP=e=>{var n;let{setStatusVoucher:t,setIsChangePromotion:c}=e,{profile:m}=(0,r.O)(),{cart:f,setCart:g,orderFormData:E,sessionId:I,updateCartCustomer:N,fetchInstallmentPackages:T,filterFinancePackage:A,incrementPending:S,decrementPending:_,getCreditCartPackage:x}=(0,i.q)(),O=window.location.href,P=(0,h.vM)(O,null!==(n=null==f?void 0:f.products)&&void 0!==n?n:[]),[b,D]=d.useState([]),[R,M]=d.useState(3);d.useEffect(()=>{null!==m?(0,l._1)({skipCount:0,maxResultCount:100,types:[1,2],status:[1]}).then(e=>D(e.data.items)):D([])},[m]);let w=async e=>{var n,o,i,r,d;if(S(),b.filter(n=>n.seriesCode===e.seriesCode).length>0){if((null==f?void 0:f.vouchers.filter(n=>n.seriesCode===e.seriesCode).length)===0){let i={sessionId:null!=I?I:"",orderType:null!=P?P:1,phoneNumber:null==E?void 0:null===(n=E.customer)||void 0===n?void 0:n.phone,seriesCodes:[null==e?void 0:e.seriesCode],phoneForSeriesCode:(null==e?void 0:e.phoneNumber)||(null==m?void 0:null===(o=m.profile)||void 0===o?void 0:o.mobilePhone),type:"ADDED"};(0,l.ow)(i).then(e=>{c(!0),e&&(g(e.data),(null==E?void 0:E.customer)&&f&&(y(null==E?void 0:E.customer,f,x),C(N,null==E?void 0:E.customer,A,T)))}).catch(e=>{var n,o;t({type:"error",status:!0,statusText:null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.error)||void 0===n?void 0:n.message}),setTimeout(()=>{t({type:"",status:!1,statusText:""})},1500)}).finally(()=>_())}else if(null==f?void 0:f.vouchers){let n={sessionId:null!=I?I:"",orderType:null!=P?P:1,phoneNumber:null==E?void 0:null===(i=E.customer)||void 0===i?void 0:i.phone,seriesCodes:[null==e?void 0:e.seriesCode],phoneForSeriesCode:(null==e?void 0:e.phoneNumber)||(null==m?void 0:null===(r=m.profile)||void 0===r?void 0:r.mobilePhone),type:"REMOVED"};return(0,l.ow)(n).then(e=>{c(!0),e&&(g(e.data),(null==E?void 0:E.customer)&&f&&(y(null==E?void 0:E.customer,f,x),C(N,null==E?void 0:E.customer,A,T)))}).finally(()=>_())}}else if(null==f?void 0:f.vouchers){let n={sessionId:null!=I?I:"",orderType:null!=P?P:1,phoneNumber:null==E?void 0:null===(d=E.customer)||void 0===d?void 0:d.phone,seriesCodes:[null==e?void 0:e.seriesCode],phoneForSeriesCode:null==e?void 0:e.phoneNumber,type:"REMOVED"};return(0,l.ow)(n).then(e=>{c(!0),e&&(g(e.data),(null==E?void 0:E.customer)&&f&&(y(null==E?void 0:E.customer,f,x),C(N,null==E?void 0:E.customer,A,T)))}).finally(()=>_())}},k=null==f?void 0:f.vouchers.concat(b).filter((e,n,t)=>n===t.findIndex(n=>n.seriesCode===e.seriesCode));return(0,o.jsxs)(o.Fragment,{children:[!!(null==k?void 0:k.length)&&v()(p()(k,R),e=>{var n;return(0,o.jsx)(a.D,{keyPromotionCard:e.seriesCode,labelPromotion:e.voucherName||e.name,view:!0,isAllowSelect:!0,action:(0,o.jsx)("button",{className:"flex h-[24px] w-[24px] cursor-pointer items-center justify-center rounded-full bg-red-red-2",children:(null==f?void 0:null===(n=f.vouchers)||void 0===n?void 0:n.some(n=>n.seriesCode===e.seriesCode))?(0,o.jsx)(u.ayY,{}):(0,o.jsx)(u.c34,{color:"var(--red-red-7)"})}),onClick:()=>w(e)})}),(0,o.jsx)(s.I,{setViewNumber:M,viewNumber:R,totalLength:(null==f?void 0:f.vouchers)?b.concat(null==f?void 0:f.vouchers).length:0})]})}},28847:function(e,n,t){"use strict";var o,l,i,r,d,a,u,s,c,v,m,p,h,f,g,y,C,E,I,N,T,A,S,_,x;t.d(n,{Es:function(){return d},Gc:function(){return P},IQ:function(){return l},KX:function(){return i},LN:function(){return O},Qm:function(){return s},Ub:function(){return f},Ud:function(){return m},XD:function(){return c},YV:function(){return u},Yv:function(){return p},Yy:function(){return r},a0:function(){return v},oi:function(){return h},x8:function(){return o}}),(g=o||(o={}))[g.CASH=1]="CASH",g[g.CARD=2]="CARD",g[g.EWALLET=3]="EWALLET",g[g.VOUCHER=4]="VOUCHER",g[g.TRANSFER=5]="TRANSFER",g[g.COD=6]="COD",g[g.VNPAY=7]="VNPAY",g[g.ALEPAY=8]="ALEPAY",g[g.BANNO=9]="BANNO",g[g.MOCA=10]="MOCA",g[g.ZALOPAY=11]="ZALOPAY",g[g.TOP_UP=12]="TOP_UP",g[g.FINANCE=15]="FINANCE",g[g.AT_SHOP=16]="AT_SHOP",g[g.TMDT=13]="TMDT",g[g.LAZADA=18]="LAZADA",g[g.SENDO=19]="SENDO",g[g.TIKTOK=21]="TIKTOK",g[g.KREDIVO=14]="KREDIVO",g[g.HOME_PAYLATER=22]="HOME_PAYLATER",g[g.MOMO=25]="MOMO",g[g.INSTALLMENT_CARD=17]="INSTALLMENT_CARD",g[g.INSTALLMENT_MOMO=29]="INSTALLMENT_MOMO",(y=l||(l={}))[y.HDBANK=4]="HDBANK",y[y.FE_CREDIT=29]="FE_CREDIT",y[y.HOME_CREDIT=13]="HOME_CREDIT",y[y.LOTTEE_FINANCE=6]="LOTTEE_FINANCE",y[y.VIB=5]="VIB",y[y.OTHER=0]="OTHER",y[y.MCREDIT=19]="MCREDIT",y[y.MUADEE=44]="MUADEE",y[y.VPBank=8]="VPBank",y[y.SACOMBANK=9]="SACOMBANK",(C=i||(i={}))[C.VISA=1]="VISA",C[C.MASTERCARD=2]="MASTERCARD",C[C.JCB=3]="JCB",(r||(r={})).MOMO="7",(E=d||(d={}))[E.CART=1]="CART",E[E.CONFIRM_ORDER=2]="CONFIRM_ORDER",E[E.INSTALLMENT=3]="INSTALLMENT",(I=a||(a={}))[I.FINANCE=2]="FINANCE",(N=u||(u={}))[N.CARD_INSTALLMENT=1]="CARD_INSTALLMENT",N[N.FINANCIER_INSTALLMENT=2]="FINANCIER_INSTALLMENT",(T=s||(s={}))[T.CARD=1]="CARD",T[T.KREDIVO=2]="KREDIVO",T[T.HOME_PAYLATER=3]="HOME_PAYLATER",(A=c||(c={})).KEY_ONLINE="117",A.SIM="118",A.IPHONE="104",A.APPLE_WATCH="289",A.SIM_DULICH="649",(v||(v={})).OLD_MACHINE="060",(m||(m={})).DV="03",(S=p||(p={}))[S.PHASE_1=1]="PHASE_1",S[S.PHASE_2=2]="PHASE_2";let O={15:{min:1e6},22:{min:3e5},17:{min:5e5},14:{min:7e5}};(_=h||(h={})).Kredivo="Kredivo",_.Hpl="Home Paylater",_.InstallmentCard="thẻ t\xedn dụng";let P={LAPTOP_CENTER:{code:"10",name:"Trung t\xe2m laptop"},"FStudio-2":{code:"2",name:"F.Studio"},"FStudio-3":{code:"3",name:"F.Studio"},"FStudio-4":{code:"4",name:"F.Studio"},"FStudio-5":{code:"5",name:"F.Studio"},GARMIN:{code:"6",name:"Garmin"}};(x=f||(f={})).STORE="addressAtShop",x.HOME="addressAtHome"},95338:function(e,n,t){"use strict";t.d(n,{vM:function(){return u},Lh:function(){return a},sg:function(){return k},zV:function(){return C},o_:function(){return E},se:function(){return i},gB:function(){return y},WT:function(){return x},NK:function(){return j},B9:function(){return O},Cw:function(){return P},O1:function(){return R},_A:function(){return D},O3:function(){return b},mG:function(){return L},FU:function(){return w}});var o=t(40763),l=t(85528);let i=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!(null==n?void 0:n.length)||!(null==t?void 0:t.length))return!1;let i=null!==(e=n.filter(e=>!!(null==e?void 0:e.isSelected)))&&void 0!==e?e:[];if(!(null==i?void 0:i.length))return!1;let r=t.find(e=>e.programType===o.nK.PRICE_ONLINE&&e.statusCode===l.f.USED);return!!r&&(null==i?void 0:i.some(e=>e.id===r.ofProductId))};var r=t(46161),d=t.n(r);let a=e=>{let{timeOpen:n,timeClose:t}=e,o=d()(),l=d()("".concat(o.format("YYYY-MM-DD")," ").concat(n)),i=d()("".concat(o.format("YYYY-MM-DD")," ").concat(t));return o.isAfter(l)&&o.isBefore(i)?"Đang mở":"Đ\xf3ng cửa"},u=(e,n)=>{var t;return(null==n?void 0:null===(t=n.filter(e=>(null==e?void 0:e.isSelected)===!0))||void 0===t?void 0:t.some(e=>(null==e?void 0:e.isAllowPreOrder)===!0))?o.Jm.PRE_ORDER:e.includes("/tra-gop")?o.Jm.TRAGOP:o.Jm.TAISHOP};var s=t(49244),c=t(14527),v=t(61117),m=t(39),p=t(97712),h=t(28847),f=t(47829);let g=function(e){var n,t,o,l,i,r,d,a;let{name:u,phone:s,email:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=[];u||m.push({name:"name",message:"Vui l\xf2ng nhập t\xean"});let g=p.z.string({message:"Vui l\xf2ng nhập số điện thoại"}).regex(v.K_,"Vui l\xf2ng nhập đ\xfang định dạng số điện thoại").safeParse(s);g.success||m.push({name:"phone",message:(null==g?void 0:null===(l=g.error)||void 0===l?void 0:null===(o=l.errors)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:t.message)||""});let{isCartHasFPTSim:y}=(0,f.xQ)(null!==(i=null==e?void 0:e.products)&&void 0!==i?i:[]);if((null==e?void 0:null===(n=e.products)||void 0===n?void 0:n.some(e=>(null==e?void 0:e.isSelected)&&(null==e?void 0:e.sectorId)===h.Ud.DV&&e.typeId===h.XD.SIM_DULICH))||y){let e=p.z.string({message:"Vui l\xf2ng nhập email"}).min(1,{message:"Vui l\xf2ng nhập email"}).email("Vui l\xf2ng nhập đ\xfang định dạng email").safeParse(c);e.success||m.push({name:"email",message:(null==e?void 0:null===(a=e.error)||void 0===a?void 0:null===(d=a.errors)||void 0===d?void 0:null===(r=d[0])||void 0===r?void 0:r.message)||""})}return m},y=(e,n)=>{var t,l;let i=[],r=null==e?void 0:e.customer;return i.push(...g(n,r)),(null==r?void 0:r.shippingMethod)===o.Zn.RECEIVE_AT_HOME&&(null===(t=e.receiver)||void 0===t?void 0:t.isReceiver)&&!e.receiver.name&&i.push({name:"name_receiver",message:"Vui l\xf2ng nhập t\xean"}),(null==r?void 0:r.shippingMethod)===o.Zn.RECEIVE_AT_HOME&&(null===(l=e.receiver)||void 0===l?void 0:l.isReceiver)&&!e.receiver.phone&&i.push({name:"phone_receiver",message:"Vui l\xf2ng nhập số điện thoại"}),(null==r?void 0:r.shippingMethod)!==o.Zn.RECEIVE_AT_HOME||(null==e?void 0:e.receiveAtHome)||i.push({name:h.Ub.HOME,message:"Vui l\xf2ng chọn th\xf4ng tin nhận h\xe0ng nh\xe0"}),(null==r?void 0:r.shippingMethod)!==o.Zn.RECEIVE_AT_STORE||(null==e?void 0:e.shopDelivery)||i.push({name:h.Ub.STORE,message:"Vui l\xf2ng chọn th\xf4ng tin nhận h\xe0ng tại shop"}),(null==r?void 0:r.selectedPaymentMethodId)||i.push({name:"paymentMethodId",message:"Vui l\xf2ng chọn phương thức thanh to\xe1n"}),(null==r?void 0:r.selectedPaymentMethodId)===h.x8.INSTALLMENT_CARD&&!(null==r?void 0:r.acceptTerms)&&(null==r?void 0:r.bankId)&&[h.IQ.HOME_CREDIT,h.IQ.MCREDIT,h.IQ.FE_CREDIT,h.IQ.MUADEE].includes(null==r?void 0:r.bankId)&&i.push({name:"acceptTerms",message:"Vui l\xf2ng chấp nhận điều khoản để tiếp tục"}),i},C=(e,n)=>{var t,o;let l=[];return(null==e?void 0:null===(t=e.customer)||void 0===t?void 0:t.bankCode)||l.push({name:"bankCode",message:"Vui l\xf2ng chọn ng\xe2n h\xe0ng trả g\xf3p"}),(null==e?void 0:null===(o=e.customer)||void 0===o?void 0:o.typeCard)||l.push({name:"typeCard",message:"Vui l\xf2ng chọn loại thẻ"}),(null==n?void 0:n.package)||l.push({name:"installment_package",message:"Vui l\xf2ng chọn g\xf3i trả g\xf3p"}),l},E=e=>{let n=[];return(null==e?void 0:e.package)||n.push({name:"finacier_package",message:"Vui l\xf2ng chọn g\xf3i trả g\xf3p"}),n},I=e=>{var n,t,l,i,r,d,a;return(null==e?void 0:null===(n=e.customer)||void 0===n?void 0:n.shippingMethod)===o.Zn.RECEIVE_AT_HOME?null!==(d=null==e?void 0:null===(r=e.receiveAtHome)||void 0===r?void 0:null===(i=r.inforDelivery)||void 0===i?void 0:null===(l=i.shop)||void 0===l?void 0:l.shopCode)&&void 0!==d?d:"":null!==(a=null==e?void 0:null===(t=e.shopDelivery)||void 0===t?void 0:t.shopCode)&&void 0!==a?a:""},N=e=>{var n,t,l,i,r,d;return(null==e?void 0:null===(n=e.customer)||void 0===n?void 0:n.shippingMethod)===o.Zn.RECEIVE_AT_STORE?null!==(r=null==e?void 0:null===(i=e.shopDelivery)||void 0===i?void 0:i.toTime)&&void 0!==r?r:"":null!==(d=null==e?void 0:null===(l=e.receiveAtHome)||void 0===l?void 0:null===(t=l.inforDelivery)||void 0===t?void 0:t.toDeliveryTime)&&void 0!==d?d:""},T=e=>{var n,t,o,l,i,r,d,a,u,s,c,v,m,p,h,f,g,y;return(null==e?void 0:e.invoice)&&Object.values(e.invoice).some(e=>e&&""!==e)?{invoice:{taxCode:null!==(s=null==e?void 0:null===(n=e.invoice)||void 0===n?void 0:n.taxCode)&&void 0!==s?s:null,custName:null!==(c=null==e?void 0:null===(t=e.invoice)||void 0===t?void 0:t.custName)&&void 0!==c?c:null,address:null!==(v=null==e?void 0:null===(o=e.invoice)||void 0===o?void 0:o.address)&&void 0!==v?v:null,phone:null!==(m=null==e?void 0:null===(l=e.invoice)||void 0===l?void 0:l.phone)&&void 0!==m?m:null,email:null!==(p=null==e?void 0:null===(i=e.invoice)||void 0===i?void 0:i.email)&&void 0!==p?p:null,buyerName:null!==(h=null==e?void 0:null===(r=e.invoice)||void 0===r?void 0:r.buyerName)&&void 0!==h?h:null,idNumber:null!==(f=null==e?void 0:null===(d=e.invoice)||void 0===d?void 0:d.idNumber)&&void 0!==f?f:null,idPassport:null!==(g=null==e?void 0:null===(a=e.invoice)||void 0===a?void 0:a.idPassport)&&void 0!==g?g:null,idRelationBudget:null!==(y=null==e?void 0:null===(u=e.invoice)||void 0===u?void 0:u.idRelationBudget)&&void 0!==y?y:null}}:{}},A=e=>{var n,t,l,i,r,d;return(null===(n=e.receiver)||void 0===n?void 0:n.isReceiver)&&(null==e?void 0:null===(t=e.customer)||void 0===t?void 0:t.shippingMethod)===o.Zn.RECEIVE_AT_HOME?{receiver:{phone:null!==(r=null==e?void 0:null===(l=e.receiver)||void 0===l?void 0:l.phone)&&void 0!==r?r:"",name:null!==(d=null==e?void 0:null===(i=e.receiver)||void 0===i?void 0:i.name)&&void 0!==d?d:""}}:{}},S=e=>{var n,t,o,l,i,r;return{customer:{phone:null!==(l=null==e?void 0:null===(n=e.customer)||void 0===n?void 0:n.phone)&&void 0!==l?l:"",name:null!==(i=null==e?void 0:null===(t=e.customer)||void 0===t?void 0:t.name)&&void 0!==i?i:"",email:null!==(r=null==e?void 0:null===(o=e.customer)||void 0===o?void 0:o.email)&&void 0!==r?r:""}}},_=(e,n,t)=>{var l,i,r,d,a,u,s,c,v,m,p,h,f,g,y,C,E,I;return{shipment:{method:t?o.Zn.RECEIVE_AT_STORE:null!==(y=null==e?void 0:null===(l=e.customer)||void 0===l?void 0:l.shippingMethod)&&void 0!==y?y:o.Zn.RECEIVE_AT_HOME,planningId:(null==e?void 0:null===(i=e.customer)||void 0===i?void 0:i.shippingMethod)===o.Zn.RECEIVE_AT_HOME&&null!==(C=null==e?void 0:null===(d=e.receiveAtHome)||void 0===d?void 0:null===(r=d.inforDelivery)||void 0===r?void 0:r.planningId)&&void 0!==C?C:"",shopCode:n,companyCode:"090800",shopName:null!==(E=(null==e?void 0:null===(a=e.customer)||void 0===a?void 0:a.shippingMethod)===o.Zn.RECEIVE_AT_HOME?null==e?void 0:null===(c=e.receiveAtHome)||void 0===c?void 0:null===(s=c.inforDelivery)||void 0===s?void 0:null===(u=s.shop)||void 0===u?void 0:u.shopName:null==e?void 0:null===(v=e.shopDelivery)||void 0===v?void 0:v.shopName)&&void 0!==E?E:"",address:null!==(I=(null==e?void 0:null===(m=e.customer)||void 0===m?void 0:m.shippingMethod)===o.Zn.RECEIVE_AT_HOME?null==e?void 0:null===(f=e.receiveAtHome)||void 0===f?void 0:null===(h=f.inforDelivery)||void 0===h?void 0:null===(p=h.shop)||void 0===p?void 0:p.address:null==e?void 0:null===(g=e.shopDelivery)||void 0===g?void 0:g.address)&&void 0!==I?I:""}}},x=(e,n,t,i,r)=>{var d,a,u,v,p,f,g,y,C,E,x,O,P,b,D,R,M,w,k,L,j,F,H,V,U,B,W,Z,Y,G,K,J;let X=I(e),z=N(e),Q=(0,m.ej)("_aff_network")&&((0,m.ej)("aff_sid")||(0,m.ej)("traffic_id"))?{trackingCode:(0,m.ej)("_aff_network")===c.EI&&(0,m.ej)("traffic_id")?null!==(B=(0,m.ej)("traffic_id"))&&void 0!==B?B:"":null!==(W=(0,m.ej)("aff_sid"))&&void 0!==W?W:"",type:(0,m.ej)("_aff_network")===c.EI?c.Ux.MAS_OFFER:c.Ux.ACCESS_TRADE}:null,q=null==i?void 0:null===(a=i.products)||void 0===a?void 0:null===(d=a.filter(e=>!!(null==e?void 0:e.isSelected)))||void 0===d?void 0:d.every(e=>(null==e?void 0:e.sectorId)===h.Ud.DV&&e.typeId===h.XD.KEY_ONLINE),$=0,ee=[null==e?void 0:null===(u=e.customer)||void 0===u?void 0:u.depositInstallmentNote,null!==(Z=null==e?void 0:null===(v=e.customer)||void 0===v?void 0:v.note)&&void 0!==Z?Z:""].filter(e=>e&&""!==e.trim()).join(" - ");return(null==i?void 0:i.orderAttribute)===s.Dg.EDUCATION&&(null==i?void 0:null===(p=i.promotions)||void 0===p?void 0:p.some(e=>e.statusCode===l.f.USED&&e.programType===o.nK.EDUCATION))&&($=s.Dg.EDUCATION),(null==i?void 0:i.orderAttribute)===s.Dg.AEC&&(null==i?void 0:null===(f=i.promotions)||void 0===f?void 0:f.some(e=>e.statusCode===l.f.USED&&e.programType===o.nK.AEC))&&($=s.Dg.AEC),(null==i?void 0:null===(g=i.flags)||void 0===g?void 0:g.isVerifyBTS)&&($=s.Dg.BACK_TO_SCHOOL),(null==i?void 0:null===(y=i.products)||void 0===y?void 0:y.some(e=>e.isAllowPreOrder&&e.isSelected))&&($=s.Dg.PRE_ORDER,t=o.Jm.PRE_ORDER),r&&t!==o.Jm.TRAGOP&&($=s.Dg.HOTSALE),{sessionId:n,orderAttribute:$,commitTime:z,note:ee,flag:{isOfficeHour:!1,isTechnicalSupport:!!(null==e?void 0:null===(C=e.customer)||void 0===C?void 0:C.isTechnicalSupport),isExchangeProduct:!1,isInstallmentSubscription:0},orderType:t,...T(e),...A(e),...S(e),..._(e,X,q),payment:{method:null==e?void 0:null===(E=e.customer)||void 0===E?void 0:E.selectedPaymentMethodId,vendor:"",bankCode:"",cardType:"",pinCode:""},address:{id:"",wardCode:null!==(Y=(null==e?void 0:null===(x=e.customer)||void 0===x?void 0:x.shippingMethod)===o.Zn.RECEIVE_AT_HOME?null==e?void 0:null===(P=e.receiveAtHome)||void 0===P?void 0:null===(O=P.ward)||void 0===O?void 0:O.code:null==e?void 0:null===(b=e.shopDelivery)||void 0===b?void 0:b.wardCode)&&void 0!==Y?Y:"",districtCode:null!==(G=(null==e?void 0:null===(D=e.customer)||void 0===D?void 0:D.shippingMethod)===o.Zn.RECEIVE_AT_HOME?null==e?void 0:null===(M=e.receiveAtHome)||void 0===M?void 0:null===(R=M.district)||void 0===R?void 0:R.code:null==e?void 0:null===(w=e.shopDelivery)||void 0===w?void 0:w.districtCode)&&void 0!==G?G:"",provinceCode:null!==(K=(null==e?void 0:null===(k=e.customer)||void 0===k?void 0:k.shippingMethod)===o.Zn.RECEIVE_AT_HOME?null==e?void 0:null===(j=e.receiveAtHome)||void 0===j?void 0:null===(L=j.city)||void 0===L?void 0:L.code:null==e?void 0:null===(F=e.shopDelivery)||void 0===F?void 0:F.cityCode)&&void 0!==K?K:"",address:null!==(J=(null==e?void 0:null===(H=e.customer)||void 0===H?void 0:H.shippingMethod)===o.Zn.RECEIVE_AT_HOME?null==e?void 0:null===(V=e.receiveAtHome)||void 0===V?void 0:V.address:null==e?void 0:null===(U=e.shopDelivery)||void 0===U?void 0:U.address)&&void 0!==J?J:""},sourceEcom:0,affiliate:Q}},O=(e,n,t)=>{let o={...e};if(n.customer){var l,i,r,d,a,u;o.vendorId=h.Qm.CARD,o.contractType=h.YV.CARD_INSTALLMENT,o.installment={bankCode:n.customer.bankCode.toString(),typeCard:n.customer.typeCard.toString(),month:null!==(u=n.customer.month)&&void 0!==u?u:null==t?void 0:null===(l=t.package)||void 0===l?void 0:l.month},o.contractInfo={shopCode:e.shipment.shopCode,phoneNumber:null==n?void 0:null===(i=n.customer)||void 0===i?void 0:i.phone,bankId:null==n?void 0:null===(r=n.customer)||void 0===r?void 0:r.bankId,cardTypeId:null==n?void 0:null===(d=n.customer)||void 0===d?void 0:d.typeCardId,customerName:null==n?void 0:null===(a=n.customer)||void 0===a?void 0:a.name,detail:null==t?void 0:t.package}}return o},P=(e,n)=>{var t,o,l,i,r;let d={...e};return d.contractInfo={contractTypeId:h.YV.FINANCIER_INSTALLMENT,companyId:null!==(i=null==n?void 0:null===(o=n.package)||void 0===o?void 0:null===(t=o.companyId)||void 0===t?void 0:t.toString())&&void 0!==i?i:"",companyName:null!==(r=null==n?void 0:null===(l=n.package)||void 0===l?void 0:l.companyName)&&void 0!==r?r:"",detail:null==n?void 0:n.package},d},b=(e,n)=>{let t={...e};return t.vendorId=h.Qm.KREDIVO,t.contractInfo={detail:{installmentAmount:n}},t},D=(e,n)=>{let t={...e};return t.vendorId=h.Qm.HOME_PAYLATER,t.contractInfo={detail:{installmentAmount:n}},t},R=(e,n,t)=>{var l,i,r,d;if((null==n?void 0:null===(l=n.customer)||void 0===l?void 0:l.selectedPaymentMethodId)&&(()=>{var e,l,i,r,d,a,u,s;let c=(null==n?void 0:null===(e=n.customer)||void 0===e?void 0:e.shippingMethod)===o.Zn.RECEIVE_AT_STORE&&!!(null==n?void 0:null===(l=n.shopDelivery)||void 0===l?void 0:l.pickupType),v=(null==n?void 0:null===(i=n.customer)||void 0===i?void 0:i.shippingMethod)===o.Zn.RECEIVE_AT_HOME&&!(null==n?void 0:null===(a=n.receiveAtHome)||void 0===a?void 0:null===(d=a.inforDelivery)||void 0===d?void 0:null===(r=d.shop)||void 0===r?void 0:r.isInventory);if(!c&&!v||!(null==n?void 0:null===(u=n.customer)||void 0===u?void 0:u.selectedPaymentMethodId)||(null==n?void 0:null===(s=n.customer)||void 0===s?void 0:s.selectedPaymentMethodId)===h.x8.FINANCE)return!1;let m=!1,p=!1;for(let e of(null==t?void 0:t.products)||[])if(e.isSelected&&(m=!!e.isEcomHub,p=(null==e?void 0:e.sectorId)===h.Ud.DV&&e.typeId===h.XD.KEY_ONLINE),m||p)return!1;return!m&&!p})()){let t={[h.x8.INSTALLMENT_CARD]:"Đơn h\xe0ng trả g\xf3p Thẻ t\xedn dụng",[h.x8.HOME_PAYLATER]:"Đơn h\xe0ng trả g\xf3p Home PayLater",[h.x8.KREDIVO]:"Đơn h\xe0ng trả g\xf3p Kredivo",[h.x8.INSTALLMENT_MOMO]:"Đơn h\xe0ng trả g\xf3p MoMo"};e.payment.method=h.x8.COD,e.note=[t[null==n?void 0:null===(i=n.customer)||void 0===i?void 0:i.selectedPaymentMethodId],null!==(d=null==n?void 0:null===(r=n.customer)||void 0===r?void 0:r.note)&&void 0!==d?d:""].filter(e=>e&&""!==e.trim()).join(" - ")}return e};var M=t(23067);function w(e){(0,M.sendGTMEvent)({ecommerce:null}),(0,M.sendGTMEvent)({event:o.J5.VIEW_ITEM,ecommerce:{currency:"VND",items:[e]}})}function k(e){var n,t;let l=e.variants.find(n=>n.sku===e.sku);(0,M.sendGTMEvent)({ecommerce:null}),(0,M.sendGTMEvent)({event:o.J5.ADD_TO_CART,ecommerce:{items:[{index:0,item_id:null==l?void 0:l.sku,item_name:null==l?void 0:l.name,affiliation:"Online",currency:"VND",discount:e.discount||0,item_variant:null==l?void 0:l.color,price:e.price||0,quantity:e.quantity||1,item_brand:e.brandId,item_list_id:JSON.stringify(null==e?void 0:null===(n=e.variants)||void 0===n?void 0:n.map(e=>null==e?void 0:e.sku)),item_list_name:JSON.stringify(null==e?void 0:null===(t=e.variants)||void 0===t?void 0:t.map(e=>null==e?void 0:e.name))}]}})}function L(e){let{calculatorPrice:n,products:t,order_success:l}=e,i=null==t?void 0:t.filter(e=>e.isSelected);i&&((0,M.sendGTMEvent)({ecommerce:null}),(0,M.sendGTMEvent)({event:o.J5.PURCHASE,ecommerce:{transaction_id:l.orderCode,value:n.estimatedPrice||0,shipping:0,currency:"VND",items:null==i?void 0:i.map((e,n)=>{var t,o,l;let i=null==e?void 0:null===(t=e.variants)||void 0===t?void 0:t.find(n=>n.sku===e.sku);return{index:n,item_id:null==i?void 0:i.sku,item_name:null==i?void 0:i.name,affiliation:"Online",discount:e.discount||0,item_brand:e.brandId,price:e.price||0,quantity:e.quantity||1,total_bill:e.totalBill,item_variant:null==i?void 0:i.color,item_list_id:JSON.stringify(null==e?void 0:null===(o=e.variants)||void 0===o?void 0:o.map(e=>null==e?void 0:e.sku)),item_list_name:JSON.stringify(null==e?void 0:null===(l=e.variants)||void 0===l?void 0:l.map(e=>null==e?void 0:e.name))}})}}))}let j=(e,n,t)=>({paymentRequestCode:n.payment.paymentRequestCode,orderCode:n.orderCode,customerId:n.customer.id,shopCode:n.shopCode,transfers:{accountNum:e.accountNumber,accountName:e.accountName,bankName:t.name,image:"",transferNum:"",content:e.bankBranch,amount:n.totalBill,isConfirm:n.totalBill,createdBy:n.modifiedBy,createdByName:n.modifiedByName}})},54951:function(e,n,t){"use strict";t.d(n,{$7:function(){return M},AE:function(){return j},Bf:function(){return T},Bk:function(){return a},Cu:function(){return P},Ee:function(){return k},Fs:function(){return w},G5:function(){return p},GR:function(){return f},Ii:function(){return g},K_:function(){return L},LV:function(){return I},N6:function(){return d},OU:function(){return b},Q8:function(){return s},Qf:function(){return D},Xc:function(){return v},Yi:function(){return S},dv:function(){return u},ge:function(){return m},k0:function(){return x},kW:function(){return C},lG:function(){return A},lQ:function(){return N},o6:function(){return _},qw:function(){return y},t:function(){return O},th:function(){return E},tx:function(){return R},uh:function(){return h},xu:function(){return c}});var o=t(86807),l=t(73463);let i=l.ZP.getInstance({baseURL:"BFF_ORDER"}),r=l.ZP.getInstance();async function d(){return await i.get(o.mTn)}async function a(e){return await i.post(o.$LE,e)}async function u(e,n){return await i.get(o.$LE,e,{signal:n})}async function s(e){return await i.post(o.hL3,e)}async function c(e){return await i.put(o.$LE,e)}async function v(e,n){return await i.put("".concat(o.$_z,"/").concat(e),n)}async function m(e){return await i.get(o.IXS,{sessionId:e})}async function p(e,n){return await i.post(o.OOg,e,{signal:n})}async function h(e){return await i.post(o.yCe,e)}async function f(e){return await i.delete(o.$LE,e)}async function g(e){return await i.post(o.kYC,e)}async function y(e){return await i.post(o.OOg,e)}async function C(e,n){return await i.post(o.M2i,e,{signal:n})}async function E(e,n){return await i.post(o.qlb,e,{signal:n})}async function I(e){return await i.post(o.klz,e)}async function N(e){return await i.post(o.gRV,e)}async function T(e,n){return await i.post(o.AXS,e,{signal:n})}async function A(e,n){return await i.post(o.Uym,e,{signal:n})}async function S(e,n){return await i.post(o.Zvt,e,{signal:n})}async function _(e){return await i.post(o.Gtv,e)}async function x(e){return await i.post(o.WV1,e)}async function O(e){return await i.post(o.z_o,e)}async function P(e){return await i.post(o.A3B,e)}async function b(e){return await i.post(o.QgE,e)}async function D(e){return await r.post(o.hmo,e)}async function R(e){return await r.post(o.E4f,e)}async function M(e){return await i.get(o.thi,{sku:e})}async function w(e){return await i.post(o.ihf,e)}async function k(e){return await i.delete(o.ihf,e)}async function L(e){return await i.post(o.WhR,e)}async function j(e){return await i.get(o.FmB,{sku:e})}},90375:function(e,n,t){"use strict";t.d(n,{q:function(){return C}});var o=t(24432),l=t(72791),i=t(49244),r=t(40763),d=t(28847),a=t(95338),u=t(54951),s=t(73463),c=t(80674),v=t(55341),m=t.n(v),p=t(87996),h=t(27432);let f={pending:!1,pendingCount:0,cart:null,cartProgress:d.Es.CART,productSelected:[],sessionId:"",paymentMethods:[],countCardItem:null,orderFormData:{receiver:{isReceiver:!1}},installmentPackages:[],bankInfo:null,installmentAmountOptions:null,creditCardPackage:null,financierInfo:null,filterFinancePackage:null,codeWarranties:[],fetchSessionLoading:!1,checkPhoneVoucher:!1,checkChangeShipmentMethod:!1,orderSuccessProcessing:null,isGoldTimeOrder:!1,selectedPromotionCodes:[],selectedCombos:[],cartProductStatusList:[],abortFetchCart:null},g=(e,n)=>({...f,fetchSessionCart:async()=>{try{n().setFetchSessionLoading(!0);let o=n().sessionId;if(!(o=localStorage.getItem(r.WG))){let e=await (0,u.N6)();if((null==e?void 0:e.status)===200){var t;o=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.sessionId}}return e((0,c.Uy)(e=>{e.sessionId=o})),localStorage.setItem(r.WG,o),o&&(await n().fetchCart({sessionId:o}),await n().fetchCountCartItem()),o}catch(e){(0,s.HR)(e),Promise.reject(e)}finally{n().setFetchSessionLoading(!1)}},addProductToCart:async(e,t)=>{var o,l,i,r,d,c,v,m;try{null==t||null===(o=t.setLoading)||void 0===o||o.call(t,!0);let s=null===(i=n().orderFormData)||void 0===i?void 0:null===(l=i.customer)||void 0===l?void 0:l.phone,v=await (0,u.Bk)({phoneNumber:s,...e});if(v){n().setCart(null==v?void 0:v.data),await n().fetchCountCartItem(),null==t||null===(r=t.onSuccess)||void 0===r||r.call(t,v);let o=null==v?void 0:null===(c=v.data)||void 0===c?void 0:null===(d=c.products)||void 0===d?void 0:d.find(n=>n.sku===e.cartItem.itemCart);return o&&(0,a.sg)(o),null==v?void 0:v.data}}catch(e){(0,s.HR)(e)&&(null==t||null===(v=t.onFailure)||void 0===v||v.call(t,e)),Promise.reject(e)}finally{n().codeWarranties||n().selectedCombos.length||null==t||null===(m=t.setLoading)||void 0===m||m.call(t,!1)}},fetchCart:async(t,o)=>{try{var l,i,d,a,v,m,p;let o=null===(i=n().orderFormData)||void 0===i?void 0:null===(l=i.customer)||void 0===l?void 0:l.phone,r=null!==(p=null===(v=n().orderFormData)||void 0===v?void 0:null===(a=v.receiveAtHome)||void 0===a?void 0:null===(d=a.inforDelivery)||void 0===d?void 0:d.shipmentFee)&&void 0!==p?p:0,s=n().abortFetchCart;s&&(null==s||null===(m=s.abort)||void 0===m||m.call(s));let h=new AbortController,f=await (0,u.dv)({phoneNumber:o,shipmentPrice:r,...t},null==h?void 0:h.signal);(null==f?void 0:f.status)===200&&(n().setCart(null==f?void 0:f.data),e((0,c.Uy)(e=>{e.sessionId=t.sessionId})))}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;if((0,s.HR)(t)&&"RCA_SESSION_NOT_FOUND:00404"===t.response.error.code){e((0,c.Uy)(e=>{e.sessionId=""})),localStorage.removeItem(r.WG);let t=async()=>{var e;let t=await n().fetchSessionCart();null==o||null===(e=o.onFailure)||void 0===e||e.call(o,t)};await (0,s.XD)(t,{retries:3})}Promise.reject(t)}},setCart:n=>{e((0,c.Uy)(e=>{e.cart=n}))},fetchPaymentMethods:async t=>{var o,l,i,r,d,a;try{null===(o=(l=n()).incrementPending)||void 0===o||o.call(l);let d=null===(r=n().orderFormData)||void 0===r?void 0:null===(i=r.customer)||void 0===i?void 0:i.phone;if(n().sessionId){let n=await (0,u.Q8)({...t,phoneNumber:d});e((0,c.Uy)(e=>{e.paymentMethods=(null==n?void 0:n.data)||[]}))}else throw Error("SessionId not found")}catch(n){e((0,c.Uy)(e=>{e.paymentMethods=[]})),(0,s.HR)(n),Promise.reject(n)}finally{null===(d=(a=n()).decrementPending)||void 0===d||d.call(a)}},updateProductInCart:async e=>{var t,o,l,i,r,d,a;try{null===(t=(o=n()).incrementPending)||void 0===t||t.call(o);let d=null!==(r=null===(i=n().orderFormData)||void 0===i?void 0:null===(l=i.customer)||void 0===l?void 0:l.phone)&&void 0!==r?r:"",a=await (0,u.xu)({...e,phoneNumber:d});a&&n().setCart(a.data)}catch(e){if((0,s.HR)(e))return e.response;Promise.reject(e)}finally{null===(d=(a=n()).decrementPending)||void 0===d||d.call(a)}},updateCartLocation:async e=>{try{var t,o,l,i,a;let s=n().sessionId;if(!s)throw Error("SessionId not found");let c=await (0,u.Xc)(s,e);if(!(null==c?void 0:c.data))return;n().setCart(c.data);let v=null===(t=n().orderFormData)||void 0===t?void 0:t.customer;if((null==v?void 0:v.orderType)!==r.Jm.TRAGOP)return;let m={storeType:r.uV.F_SHOP,bankInfo:{pinCode:"",bankId:null!==(o=null==v?void 0:v.bankId)&&void 0!==o?o:0,cardId:null!==(l=null==v?void 0:v.typeCardId)&&void 0!==l?l:0,bankCode:null!==(i=null==v?void 0:v.bankCode)&&void 0!==i?i:"",typeCard:null!==(a=null==v?void 0:v.typeCard)&&void 0!==a?a:""}};if((!m.bankInfo.bankId||!m.bankInfo.cardId)&&v.selectedPaymentMethodId===(null===d.x8||void 0===d.x8?void 0:d.x8.INSTALLMENT_CARD))return;await n().getCreditCartPackage(m);let p=(null==v?void 0:v.selectedPaymentMethodId)===d.x8.INSTALLMENT_MOMO,h=(null==v?void 0:v.selectedPaymentMethodId)&&[d.x8.FINANCE].includes(null==v?void 0:v.selectedPaymentMethodId),f=n().filterFinancePackage;if(!h&&!p)return;let g={financierOptions:{companyId:p?d.Yy.MOMO:null==f?void 0:f.companyId,prePayPercent:null==f?void 0:f.prePayPercent,term:null==f?void 0:f.term}};await n().fetchInstallmentPackages(g)}catch(e){if((0,s.HR)(e))return e.response;Promise.reject(e)}},fetchCountCartItem:async()=>{try{let t=n().sessionId;if(t){let n=await (0,u.ge)(t);e((0,c.Uy)(e=>{e.countCardItem=(null==n?void 0:n.data)||null}))}}catch(n){e((0,c.Uy)(e=>{e.countCardItem=null})),(0,s.HR)(n),Promise.reject(n)}},postSelectPromotion:async(t,o,l,i)=>{var a,v,m,p,h,f,g,y,C,E,I,N,T,A,S,_,x;null==o||null===(a=o.setLoading)||void 0===a||a.call(o,!0);try{i&&(null===(v=(m=n()).incrementPending)||void 0===v||v.call(m));let o=n().sessionId,a=null===(h=n().orderFormData)||void 0===h?void 0:null===(p=h.shopDelivery)||void 0===p?void 0:p.shopCode,s=null===(g=n().orderFormData)||void 0===g?void 0:null===(f=g.customer)||void 0===f?void 0:f.phone,S=null===(y=n().orderFormData.customer)||void 0===y?void 0:y.selectedPaymentMethodId,_=null===(E=n().orderFormData)||void 0===E?void 0:null===(C=E.customer)||void 0===C?void 0:C.orderType,x=null===(N=n().cart)||void 0===N?void 0:null===(I=N.installment)||void 0===I?void 0:I.type,O=null===(A=n().cart)||void 0===A?void 0:null===(T=A.installment)||void 0===T?void 0:T.vendor,P={...t,sessionId:null!=o?o:"",phoneNumber:s,shopCode:null!=a?a:"",contractType:x,vendorId:O};if(o){let t=await (0,u.G5)(P,l);if(!t)return;if(S&&[d.x8.INSTALLMENT_CARD,d.x8.KREDIVO,d.x8.HOME_PAYLATER].includes(S)&&_===r.Jm.TRAGOP){let n=null==t?void 0:t.data;e((0,c.Uy)(e=>{e.creditCardPackage=n||null,e.cart=(null==n?void 0:n.cart)||null,e.installmentAmountOptions=(null==n?void 0:n.amountOptions)||[]}))}else{let e=t.data;n().setCart(e)}}}catch(e){(0,s.HR)(e),Promise.reject(e)}finally{null==o||null===(S=o.setLoading)||void 0===S||S.call(o,!1),null===(_=(x=n()).decrementPending)||void 0===_||_.call(x)}},setOrderFormData:n=>{e((0,c.Uy)(e=>{e.orderFormData={...e.orderFormData,...n}}))},updateCartCustomer:n=>{e((0,c.Uy)(e=>{var t;e.orderFormData={...e.orderFormData,customer:{...null===(t=e.orderFormData)||void 0===t?void 0:t.customer,...n}}}))},updateCodeWarranty:n=>{e((0,c.Uy)(e=>{e.codeWarranties=n}))},setOrderFormError:n=>{e((0,c.Uy)(e=>{var t,o,l,i;let r=null===(o=e.orderFormData)||void 0===o?void 0:null===(t=o.errors)||void 0===t?void 0:t.find(e=>e.name===n.name);r?r.message=n.message:e.orderFormData={...e.orderFormData,errors:[...null!==(i=null===(l=e.orderFormData)||void 0===l?void 0:l.errors)&&void 0!==i?i:[],{name:n.name,message:n.message}]}}))},clearOrderFormError:n=>{e((0,c.Uy)(e=>{var t,o;e.orderFormData={...e.orderFormData,errors:null===(o=e.orderFormData)||void 0===o?void 0:null===(t=o.errors)||void 0===t?void 0:t.filter(e=>!n.includes(e.name))}}))},toggleItem:async e=>{var t,o,l,i,r,d,a;try{null===(t=(o=n()).incrementPending)||void 0===t||t.call(o);let d=null!==(r=null===(i=n().orderFormData)||void 0===i?void 0:null===(l=i.customer)||void 0===l?void 0:l.phone)&&void 0!==r?r:"",a=await (0,u.uh)({...e,phoneNumber:d});if(a)return n().setCart(a.data),a.data}catch(e){if((0,s.HR)(e))return null==e?void 0:e.response;Promise.reject(e)}finally{null===(d=(a=n()).decrementPending)||void 0===d||d.call(a)}},mergeCart:async t=>{try{var o,l,i;let e=null!==(i=null===(l=n().orderFormData)||void 0===l?void 0:null===(o=l.customer)||void 0===o?void 0:o.phone)&&void 0!==i?i:"",r=await (0,u.Ii)({...t,phoneNumber:e});r&&n().setCart(r.data)}catch(t){(0,s.HR)(t)&&"RCA_SESSION_NOT_FOUND:00404"===t.response.error.code&&(e((0,c.Uy)(e=>{e.sessionId=""})),localStorage.removeItem(r.WG),await (0,s.XD)(n().fetchSessionCart,{retries:3})),Promise.reject(t)}},deleteItem:async(e,t)=>{var o,l,i,r,d,a,c,v,m;try{null===(o=(l=n()).incrementPending)||void 0===o||o.call(l);let s=null!==(a=null===(r=n().orderFormData)||void 0===r?void 0:null===(i=r.customer)||void 0===i?void 0:i.phone)&&void 0!==a?a:"",c=await (0,u.GR)({...e,phoneNumber:s});c&&(n().setCart(c.data),await n().fetchCountCartItem()),null==t||null===(d=t.onSuccess)||void 0===d||d.call(t)}catch(e){null==t||null===(c=t.onFailure)||void 0===c||c.call(t),(0,s.HR)(e),Promise.reject(e)}finally{null===(v=(m=n()).decrementPending)||void 0===v||v.call(m)}},updateSelectedPromotion:async(e,t)=>{try{var o,l,i;let r=null===(l=n().orderFormData)||void 0===l?void 0:null===(o=l.customer)||void 0===o?void 0:o.phone,d=await (0,u.qw)({...e,phoneNumber:r});null==t||null===(i=t.onSuccess)||void 0===i||i.call(t,null==d?void 0:d.data)}catch(e){(0,s.HR)(e),Promise.reject(e)}},fetchInstallmentPackages:async(t,o)=>{var l,i,r,d,a,v;try{null===(l=(i=n()).incrementPending)||void 0===l||l.call(i);let a=null===(d=n().orderFormData)||void 0===d?void 0:null===(r=d.customer)||void 0===r?void 0:r.phone,s=n().sessionId,v=await (0,u.kW)({...t,phoneNumber:a,sessionId:s},o);return e((0,c.Uy)(e=>{var n,t;e.installmentPackages=(null==v?void 0:null===(n=v.data)||void 0===n?void 0:n.packages)||[],e.cart=null==v?void 0:null===(t=v.data)||void 0===t?void 0:t.cart,e.financierInfo=(0,p.e)(null==v?void 0:v.data,["financeCompany","terms","amountOptions"])})),null==v?void 0:v.data}catch(n){e((0,c.Uy)(e=>{e.installmentPackages=[]})),(0,s.HR)(n),Promise.reject(n)}finally{null===(a=(v=n()).decrementPending)||void 0===a||a.call(v)}},saveCartInstallmentPackages:async(t,o)=>{var l,i,r,d,a,v;try{null===(l=(i=n()).incrementPending)||void 0===l||l.call(i);let a=null===(d=n().orderFormData)||void 0===d?void 0:null===(r=d.customer)||void 0===r?void 0:r.phone,s=await (0,u.th)({phoneNumber:a,...t},o);return e((0,c.Uy)(e=>{e.cart=(null==s?void 0:s.data)||[]})),(null==s?void 0:s.data)||void 0}catch(e){(0,s.HR)(e),Promise.reject(e)}finally{null===(a=(v=n()).decrementPending)||void 0===a||a.call(v)}},createOrder:async(e,t)=>{var o,l,i,r;try{null==t||null===(o=t.setLoading)||void 0===o||o.call(t,!0);let{data:i}=await (0,u.LV)(e),r=n().cart;if(r){let{products:e,calculatorPrice:n}=r;(0,a.mG)({products:e,calculatorPrice:n,order_success:i})}null==t||null===(l=t.onSuccess)||void 0===l||l.call(t,i)}catch(e){(0,s.HR)(e)&&(null==t||null===(i=t.onFailure)||void 0===i||i.call(t,e)),Promise.reject(e)}finally{null==t||null===(r=t.setLoading)||void 0===r||r.call(t,!1)}},getAllBank:async t=>{try{var o,l,r,a;let s=await (0,u.lQ)(t),v=n().cart;(null==v?void 0:v.orderAttribute)===i.Dg.AEC&&(null==v?void 0:null===(o=v.flags)||void 0===o?void 0:o.isVPBank)&&(null==s?void 0:null===(l=s.data)||void 0===l?void 0:l.banks)&&(s.data.banks=null==s?void 0:null===(a=s.data)||void 0===a?void 0:null===(r=a.banks)||void 0===r?void 0:r.filter(e=>e.bankId===d.IQ.VPBank)),e((0,c.Uy)(e=>{e.bankInfo=(null==s?void 0:s.data)||null}))}catch(n){e((0,c.Uy)(e=>{e.bankInfo=null})),Promise.reject(n)}},getCreditCartPackage:async(t,o)=>{var l,i,a,s;try{let{incrementPending:a,sessionId:s,orderFormData:v}=n();if(null==a||a(),!s)return Promise.resolve(null);let p=null===(l=v.customer)||void 0===l?void 0:l.selectedPaymentMethodId,h=null===(i=v.customer)||void 0===i?void 0:i.phone,f={...t,phoneNumber:h,sessionId:s},g={data:null,status:200,message:""};switch(p){case null===d.x8||void 0===d.x8?void 0:d.x8.INSTALLMENT_CARD:g=await (0,u.Bf)(f,o);break;case null===d.x8||void 0===d.x8?void 0:d.x8.HOME_PAYLATER:g=await (0,u.lG)(m()({...f,orderType:r.Jm.TRAGOP},"bankInfo"),o);break;case null===d.x8||void 0===d.x8?void 0:d.x8.KREDIVO:g=await (0,u.Yi)(m()({...f,orderType:r.Jm.TRAGOP},"bankInfo"),o)}return g.data&&e((0,c.Uy)(e=>{var n,t;e.creditCardPackage=g.data,e.cart=(null==g?void 0:null===(n=g.data)||void 0===n?void 0:n.cart)||null,e.installmentAmountOptions=(null==g?void 0:null===(t=g.data)||void 0===t?void 0:t.amountOptions)||[]})),g.data}catch(n){return e((0,c.Uy)(e=>{e.creditCardPackage=null})),Promise.reject(n)}finally{null===(a=(s=n()).decrementPending)||void 0===a||a.call(s)}},installmentBank:async t=>{try{let g=n().sessionId;if(g){var o,l,i,a,s,v,m,p,h,f;let y={sessionId:g,contractType:d.YV.CARD_INSTALLMENT,vendorId:d.Qm.CARD,storeType:r.uV.F_SHOP,orderType:r.Jm.TRAGOP,bankInfo:{bankCode:null!==(m=null==t?void 0:null===(o=t.bankInfo)||void 0===o?void 0:o.bankCode)&&void 0!==m?m:"",typeCard:null!==(p=null==t?void 0:null===(l=t.bankInfo)||void 0===l?void 0:l.typeCard)&&void 0!==p?p:"",bankId:null!==(h=null==t?void 0:null===(i=t.bankInfo)||void 0===i?void 0:i.bankId)&&void 0!==h?h:0,cardId:null!==(f=null==t?void 0:null===(a=t.bankInfo)||void 0===a?void 0:a.cardId)&&void 0!==f?f:0}},C=null===(v=n().orderFormData)||void 0===v?void 0:null===(s=v.customer)||void 0===s?void 0:s.phone,E=await (0,u.Cu)({phoneNumber:C,...y});return e((0,c.Uy)(e=>{e.cart=(null==E?void 0:E.data)||[]})),null==E?void 0:E.data}}catch(e){Promise.reject(e)}},installmentVendor:async t=>{var o,l,i,d,a,s,v;try{null===(o=(l=n()).incrementPending)||void 0===o||o.call(l);let s=n().sessionId;if(s){let o={sessionId:s,contractType:null!==(a=t.contractType)&&void 0!==a?a:0,vendorId:t.vendorId,orderType:r.Jm.TRAGOP},l=null===(d=n().orderFormData)||void 0===d?void 0:null===(i=d.customer)||void 0===i?void 0:i.phone,v=await (0,u.OU)({phoneNumber:l,...o});e((0,c.Uy)(e=>{e.cart=(null==v?void 0:v.data)||[]}))}}catch(e){Promise.reject(e)}finally{null===(s=(v=n()).decrementPending)||void 0===s||s.call(v)}},setCartProgress:n=>{e((0,c.Uy)(e=>{e.cartProgress=n}))},clearCart:async()=>{e((0,c.Uy)(e=>{e.cart=null,e.productSelected=[],e.sessionId="",e.paymentMethods=[],e.countCardItem=null,e.orderFormData={},e.installmentPackages=[],e.bankInfo=null,e.creditCardPackage=null,e.pending=!1,e.pendingCount=0,e.cartProgress=d.Es.CART})),localStorage.removeItem(r.WG);let t=await (0,s.XD)(n().fetchSessionCart,{retries:3}),o=h.O.getState().profile;if(o){let e=await (0,u.Ii)({sessionId:t,customerId:o.customerId,shipmentPrice:0,phoneNumber:"",shopCode:""});e&&n().setCart(e.data)}},replaceCartItem:async(e,t)=>{var o,l,i,r,d,a,c,v;try{null===(o=(l=n()).incrementPending)||void 0===o||o.call(l);let s=null!==(d=null===(r=n().orderFormData)||void 0===r?void 0:null===(i=r.customer)||void 0===i?void 0:i.phone)&&void 0!==d?d:"",c=await (0,u.o6)({...e,phoneNumber:s});c&&(n().setCart(c.data),null==t||null===(a=t.onSuccess)||void 0===a||a.call(t,c))}catch(e){(0,s.HR)(e),Promise.reject(e)}finally{null===(c=(v=n()).decrementPending)||void 0===c||c.call(v)}},selectedWarranty:async(e,t)=>{var o,l,i,r,d,a;try{let t=null!==(i=null===(l=n().orderFormData)||void 0===l?void 0:null===(o=l.customer)||void 0===o?void 0:o.phone)&&void 0!==i?i:"",r=await (0,u.k0)({...e,phoneNumber:t});r&&n().setCart(r.data)}catch(e){null==t||null===(a=t.onFailure)||void 0===a||a.call(t,(0,s.HR)(e)?null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(r=d.error)||void 0===r?void 0:r.message:"Đ\xe3 c\xf3 lỗi xảy ra. Vui l\xf2ng thử lại."),Promise.reject(e)}},ExchangeLoyalty:async e=>{try{var t,o,l;let i=null!==(l=null===(o=n().orderFormData)||void 0===o?void 0:null===(t=o.customer)||void 0===t?void 0:t.phone)&&void 0!==l?l:"",r=await (0,u.t)({phoneNumber:i,...e});r&&n().setCart(r.data)}catch(e){(0,s.HR)(e),Promise.reject(e)}},setFilterFinancePackage:async n=>{e((0,c.Uy)(e=>{e.filterFinancePackage={...e.filterFinancePackage||{},...n}}))},setFetchSessionLoading(n){e((0,c.Uy)(e=>{e.fetchSessionLoading=n}))},setCheckPhoneVoucher(n){e((0,c.Uy)(e=>{e.checkPhoneVoucher=n}))},setCheckChangeShipmentMethod(n){e((0,c.Uy)(e=>{e.checkChangeShipmentMethod=n}))},setOrderSuccessProcessing(n){e((0,c.Uy)(e=>{e.orderSuccessProcessing=n}))},setIsGoldTimeOrder(n){e((0,c.Uy)(e=>{e.isGoldTimeOrder=n}))},setSelectedPromotionCodes(n){e((0,c.Uy)(e=>{e.selectedPromotionCodes=n}))},addProductCombo:async(e,t)=>{var o,l,i,r,d,a,c,v;try{null===(o=(l=n()).incrementPending)||void 0===o||o.call(l);let r=await (0,u.Fs)(e);r&&(n().setCart(r.data),(null==t?void 0:t.onSuccess)&&(null==t||null===(i=t.onSuccess)||void 0===i||i.call(t)))}catch(e){null==t||null===(a=t.onFailure)||void 0===a||a.call(t,(0,s.HR)(e)?null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(r=d.error)||void 0===r?void 0:r.message:"Đ\xe3 c\xf3 lỗi xảy ra. Vui l\xf2ng thử lại."),Promise.reject(e)}finally{null===(v=n())||void 0===v||null===(c=v.decrementPending)||void 0===c||c.call(v)}},deleteProductCombo:async(e,t)=>{var o,l,i,r,d,a,c;try{null===(o=(l=n()).incrementPending)||void 0===o||o.call(l);let t=await (0,u.Ee)(e);t&&n().setCart(t.data)}catch(e){null==t||null===(d=t.onFailure)||void 0===d||d.call(t,(0,s.HR)(e)?null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(i=r.error)||void 0===i?void 0:i.message:"Đ\xe3 c\xf3 lỗi xảy ra. Vui l\xf2ng thử lại."),Promise.reject(e)}finally{null===(c=n())||void 0===c||null===(a=c.decrementPending)||void 0===a||a.call(c)}},setSelectedCombos:n=>{e((0,c.Uy)(e=>{e.selectedCombos=n}))},validateProductsInstallment:async e=>{try{let n=await (0,u.K_)(e);if(n)return n.data}catch(e){Promise.reject(e)}},setCartProductStatusList:n=>{e((0,c.Uy)(e=>{e.cartProductStatusList=n}))},getProductStatusByListSku:async n=>{try{let{data:t}=await (0,u.AE)(n);e((0,c.Uy)(e=>{e.cartProductStatusList=t}))}catch(e){Promise.reject(e)}}});var y=t(51436);let C=(0,o.Ue)((0,l.mW)((0,l.tJ)((e,n,t)=>({...g(e,n,t),isOpenLocationSheet:!1,isLocationPopupShown:!1,pending:!1,pendingCount:0,currentPage:y.Oy.HOME,setCurrentPage:n=>{e({currentPage:n})},incrementPending:()=>e(e=>{let n=e.pendingCount+1;return{pendingCount:n,pending:n>0}}),decrementPending:()=>e(e=>{let n=Math.max(0,e.pendingCount-1);return{pendingCount:n,pending:n>0}}),setOpenLocationSheet:n=>e({isOpenLocationSheet:n}),setHasShownLocationPopup:n=>e({isLocationPopupShown:n})}),{name:"app-storage",partialize:e=>({...e,orderFormData:m()(null==e?void 0:e.orderFormData,"errors")}),storage:(0,l.FL)(()=>sessionStorage)})))},27432:function(e,n,t){"use strict";t.d(n,{O:function(){return r}});var o=t(43230),l=t(24432),i=t(72791);let r=(0,l.Ue)((0,i.XR)((0,o.Cr)(e=>({profile:null,loading:!1,birthdayAvatar:null,setProfile:n=>e({profile:n}),setLoading:n=>e({loading:n}),resetProfile:()=>e({profile:null}),setBirthdayAvatar:n=>e({birthdayAvatar:n})}))))},20266:function(e,n,t){"use strict";var o=t(27573);n.Z=e=>(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",...e,children:[(0,o.jsx)("path",{d:"M26.7233 5.71704L30.1623 19.6235C30.2881 20.1317 29.9874 20.6484 29.4902 20.7771L9.27562 26.0109C8.63108 26.1775 7.94958 25.968 7.5026 25.4644L2.82365 20.1972C2.41971 19.7426 2.2641 19.113 2.40813 18.5162L4.07575 11.6065C4.23523 10.9458 4.73739 10.4291 5.38137 10.2626L25.5959 5.02928C26.0926 4.90054 26.5975 5.20828 26.7233 5.71704Z",fill:"#EF4444"}),(0,o.jsx)("path",{d:"M28.8525 11.6417V26.1156C28.8525 26.6046 28.4651 27.0004 27.9878 27.0004H7.0735C6.4091 27.0004 5.79823 26.6255 5.48534 26.0253L2.2119 19.7457C1.92937 19.2036 1.92937 18.5537 2.2119 18.0122L5.48534 11.732C5.79823 11.1318 6.40855 10.7568 7.0735 10.7568H27.9878C28.4656 10.7568 28.8525 11.1532 28.8525 11.6417Z",fill:"white"}),(0,o.jsx)("path",{d:"M7.83626 18.8781C7.83626 19.5766 7.28278 20.143 6.59962 20.143C5.91646 20.143 5.36353 19.5766 5.36353 18.8781C5.36353 18.1796 5.91701 17.6133 6.59962 17.6133C7.28223 17.6133 7.83626 18.1796 7.83626 18.8781Z",fill:"#FEE2E2"}),(0,o.jsx)("path",{d:"M16.4658 13.9346C15.3241 13.9346 14.3954 14.8843 14.3954 16.0526C14.3954 17.2209 15.3236 18.1712 16.4658 18.1712C17.6081 18.1712 18.5363 17.2215 18.5363 16.0526C18.5363 14.8838 17.6076 13.9346 16.4658 13.9346ZM16.4658 16.759C16.0845 16.759 15.7755 16.4434 15.7755 16.0526C15.7755 15.6619 16.084 15.3462 16.4658 15.3462C16.8477 15.3462 17.1562 15.6624 17.1562 16.0526C17.1562 16.4428 16.8472 16.759 16.4658 16.759Z",fill:"#EF4444"}),(0,o.jsx)("path",{d:"M22.5611 15.033L17.0401 23.5069C16.832 23.8265 16.4055 23.9213 16.0832 23.7022C15.7659 23.486 15.6804 23.0478 15.8917 22.7237L21.4128 14.2498C21.6219 13.9251 22.0501 13.8365 22.3696 14.0533C22.6869 14.2701 22.7725 14.7083 22.5611 15.033Z",fill:"#EF4444"}),(0,o.jsx)("path",{d:"M21.9868 19.585C20.8451 19.585 19.9164 20.5347 19.9164 21.703C19.9164 22.8713 20.8446 23.8216 21.9868 23.8216C23.1291 23.8216 24.0573 22.8718 24.0573 21.7036C24.0573 20.5353 23.1286 19.585 21.9868 19.585ZM21.9868 22.4094C21.6055 22.4094 21.2965 22.0937 21.2965 21.703C21.2965 21.3123 21.605 20.9966 21.9868 20.9966C22.3687 20.9966 22.6766 21.3128 22.6772 21.703C22.6772 22.0932 22.3681 22.4094 21.9868 22.4094Z",fill:"#EF4444"})]})},13322:function(e,n,t){"use strict";var o=t(27573),l=t(84104),i=t.n(l),r=t(53469),d=t(7653);n.Z=e=>{let{label:n="",content:t=(0,o.jsx)(o.Fragment,{}),disabled:l=!1,value:a,size:u="medium",name:s="",checked:c=!1,onChange:v,className:m,labelClass:p,fStudio:h=!1,...f}=e,g=(0,r.Z)([i().toggleRadioLabel,p],"medium"===u?"b2-regular":"b1-regular",{[i().labelRadioMedium]:"medium"===u,[i().labelRadioLarge]:"large"===u}),[y,C]=(0,d.useState)(c);(0,d.useEffect)(()=>{C(c)},[c]);let E=Math.random();return(0,o.jsxs)("div",{className:m,children:[(0,o.jsx)("input",{id:"radioButtonId-".concat(E.toString()+a),className:(0,r.Z)(i().toggleRadio,{[i().fstudio]:h}),value:a,type:"radio",name:s,onChange:e=>v&&v(e.target.value),disabled:l,checked:y,...f}),(0,o.jsx)("label",{htmlFor:"radioButtonId-".concat(E.toString()+a),className:g,children:n}),t]})}},96865:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var o=t(27573),l=t(53469),i=t(83103),r=t(7653),d=t(3458),a=t(52810),u=t.n(a),s=e=>{let{setShowBackdrop:n,showBackdrop:t,darkMode:i=!1,className:d}=e;return(0,r.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]),(0,o.jsx)("div",{onClick:()=>n(!1),className:(0,l.Z)(u().backdrop,{["".concat(u().darkMode)]:i,["".concat(u().showBackdrop)]:t},d)})},c=t(93940),v=t(79994),m=t.n(v),p=e=>{let{visible:n,setVisible:t,placement:i="right",closeTravel:d=150,children:a,transition:u="transform 500ms cubic-bezier(0.32, 0.72, 0, 1)",...s}=e,c="translate".concat("up"===i||"down"===i?"Y":"X","(").concat("up"===i||"left"===i?"-":"","100%)"),[v,p]=(0,r.useState)(u),[h,f]=(0,r.useState)(c),[g,y]=(0,r.useState)(null),C=!1,E=0,I=0,N=0,T=(0,r.useRef)(),A=(0,r.useCallback)(e=>{let n=e.target;["INPUT","TEXTAREA","SELECT","BUTTON","A","P","SPAN"].includes(n.tagName)||n.isContentEditable||(e.preventDefault(),C=!0,E=e.clientY,I=e.clientX,document.addEventListener("mousemove",S),document.addEventListener("mouseup",_),p(""))},[i]),S=(0,r.useCallback)(e=>{if(C){switch(i){case"up":N=E-e.clientY;break;case"down":N=e.clientY-E;break;case"left":N=I-e.clientX;break;default:N=e.clientX-I}N>=0&&f("translate".concat("up"===i||"down"===i?"Y":"X","(").concat("up"===i||"left"===i?"-":"").concat(N,"px)"))}},[i]),_=(0,r.useCallback)(()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",_),p(u),C=!1,N>d?(t(!1),f(c)):f(""),N=0},[d,c]);return(0,r.useEffect)(()=>(T.current&&(y(T.current),n?f(""):f(c)),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",_),g&&g.removeEventListener("mousedown",A)}),[g,n,A,S,_,c]),(0,o.jsx)("div",{...s,className:(0,l.Z)(m().swipeable,s.className,m()[i]),ref:T,onMouseDown:A,style:{position:"fixed",transition:"".concat(v),transform:"".concat(h),...s.style},children:a})},h=t(53700),f=t.n(h),g=e=>{let{titleSheet:n,darkMode:t=!1,showSheet:a=!1,placement:u="down",children:v,className:m,width:h="100%",height:g="100%",maxHeight:y="100%",headerProps:C,setShowSheet:E,showClose:I=!0,bodyClassName:N,onClickClose:T,...A}=e,S=(0,r.useRef)(null),[_,x]=(0,r.useState)(0);return(0,i.y1)([["Escape",()=>{a&&E(!1)}]]),(0,r.useEffect)(()=>{S.current&&a&&x(Number(S.current.offsetHeight))},[a,S.current]),(0,r.useEffect)(()=>{let e=document.querySelector("body");e&&(e.style.overflow=a?"hidden":"",e.style.position=a?"relative":"")},[a]),a&&(0,d.createPortal)((0,o.jsxs)("div",{...A,className:(0,l.Z)(f().sheet,m),children:[(0,o.jsx)(s,{darkMode:t,showBackdrop:a,setShowBackdrop:E}),(0,o.jsxs)(p,{placement:u,visible:a,setVisible:E,className:(0,l.Z)({["".concat(f().darkMode)]:t}),style:{maxWidth:h,height:g,maxHeight:y},children:[(0,o.jsxs)("div",{className:(0,l.Z)("sheet-title",(!!n||I)&&"relative max-h-[62px] min-h-10"),children:[n&&(0,o.jsx)("div",{title:n.toString(),ref:S,className:"border-500 line-clamp-1 border-b-[1px] py-3 pl-4 pr-5",...C,children:n}),I&&(0,o.jsx)(c.UiA,{className:(0,l.Z)(f().icon,"cursor-pointer"),onClick:()=>{E(!1),null==T||T()},width:24,height:24})]}),(0,o.jsx)("div",{className:(0,l.Z)(f().body,f()[u],N,{active:a}),style:{maxHeight:"calc(100% - ".concat(_,"px)"),overflow:"auto"},children:v})]})]}),document.body)}},61117:function(e,n,t){"use strict";t.d(n,{HZ:function(){return i},JF:function(){return p},KU:function(){return v},K_:function(){return d},RV:function(){return a},Wx:function(){return c},hU:function(){return m},hW:function(){return s},kS:function(){return r},oH:function(){return l},sD:function(){return f},tv:function(){return h},uJ:function(){return o},wq:function(){return u}}),t(46161);let o=(e,n)=>{let t=n.toString(),o="".concat(t.length?"?":"").concat(t);return"".concat(e).concat(o)};function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e?("string"==typeof e&&(e=parseInt(e,10)),new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)):"0 ₫"}let i=(e,n)=>{var t,o;if(!document.getElementById(e))return;let l=(null===(o=document.getElementById(e))||void 0===o?void 0:null===(t=o.getBoundingClientRect())||void 0===t?void 0:t.top)||0;window.scrollTo({behavior:"smooth",top:l-document.body.getBoundingClientRect().top-n})};function r(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e?e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(n)):0}let d=/^(0[1-9][0-9]{8,9}|84[1-9][0-9]{8,9})$/,a=/^[0-9]{10}$|^[0-9]{10}-[0-9]{3}$/,u=/^[0-9]{9}$|^[0-9]{12}$/,s=/^[A-Z]\d{7}$/;function c(e,n,t){let o=new Date;o.setTime(o.getTime()+864e5*t);let l="expires="+o.toUTCString();document.cookie=e+"="+n+";"+l+";path=/; HttpOnly Secure"}let v=/[`~!@#$%^&*_|+\=;'"<>\{\}\[\]\\]/gi;function m(e){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")}function p(e){let n=/((http|https):\/\/[\w\.\/\-=?#]+)/;return n.test(e)?/<a\b[^>]*>(.*?)<\/a>/i.test(e)?e:e.replace(n,'<a href="$1" target="_blank" class="text-textOnWhiteHyperLink">$1</a>'):e}let h=e=>{let n=["iphone 16","iphone 16 pro","iphone 16 pro max"],t=n[Math.floor(Math.random()*n.length)];return!!e&&(t||"iphone 16")},f=e=>{try{let n=new URL(e);return""!==n.protocol}catch(e){return!1}}},43230:function(e,n,t){"use strict";function o(e){return e&&"object"==typeof e&&!Array.isArray(e)}t.d(n,{Cr:function(){return c},Dr:function(){return s}});let l=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object.keys(e).forEach(i=>{o(e[i])?l(e[i],n,[t,i].join("|")):n([t,i].join("|"),e[i])})},i=e=>document.cookie.split(";").map(e=>e.split("=").map(e=>e.trim())).filter(n=>{let[t]=n;return t&&t!==e&&t.startsWith(e)}).reduce((e,n)=>{let[t,o]=n;return t?Object.assign(e,{[t]:o}):e},{}),r=(e,n)=>{let t={};return Object.keys(e).forEach(n=>{let l=n.split("|");t=function e(n){for(var t=arguments.length,l=Array(t>1?t-1:0),i=1;i<t;i++)l[i-1]=arguments[i];if(!l.length)return n;let r=l.shift();if(o(n)&&o(r))for(let t in r)o(r[t])?(n[t]||Object.assign(n,{[t]:{}}),e(n[t],r[t])):Object.assign(n,{[t]:r[t]});return e(n,...l)}(t,function e(n,t){let o=decodeURIComponent(t);if(0===n.length)return d(o)?JSON.parse(o):["true","false"].includes(o)?"false"!==o:o;let l={},[i,...r]=n;return i&&(l[i]=e(r,t)),l}(l,e[n]))}),t[n]},d=e=>e.startsWith("[")&&e.endsWith("]"),a=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent),u=e=>encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),s={getItem:e=>JSON.stringify(r(i(e),e)),setItem:function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,o=new Date;o.setTime(o.getTime()+864e5*t);let i=JSON.parse(n);s.removeItem(e),l(i,(n,t)=>{let l=Array.isArray(t)?JSON.stringify(t):t;!function(e,n,t){let o="".concat(a(e),"=").concat(u(n));if(t){if(t.expires){if("number"==typeof t.expires){let e=new Date;e.setTime(e.getTime()+864e5*t.expires),o+="; expires=".concat(e.toUTCString())}else t.expires instanceof Date&&(o+="; expires=".concat(t.expires.toUTCString()))}t.path&&(o+="; path=".concat(t.path)),t.domain&&(o+="; domain=".concat(t.domain)),t.secure&&(o+="; secure"),t.sameSite&&(o+="; samesite=".concat(t.sameSite))}document.cookie=o}("".concat(e).concat(n),l,{expires:o,path:"/"})})},removeItem:e=>{Object.keys(i(e)).forEach(e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"})}},c=(e,n)=>(t,o,l)=>{var i,r;if("undefined"==typeof BroadcastChannel)return e(t,o,l);let d=void 0!==o(),a=!1,u=0,s=null!==(i=null==n?void 0:n.name)&&void 0!==i?i:e.toString(),c=[0],v=new BroadcastChannel(s),m=()=>{let e=o();(null==n?void 0:n.partialize)&&(e=n.partialize(e)),(null==n?void 0:n.skipSerialization)||(e=JSON.parse(JSON.stringify(e))),v.postMessage({action:"change",state:e})},p=function(){for(var e=arguments.length,o=Array(e),l=0;l<e;l++)o[l]=arguments[l];t(...o),null!=n&&n.unsync||m()};return v.onmessage=e=>{var o,l,i;if("sync"===e.data.action){if(!a)return;m();let e=c[c.length-1]+1;c.push(e),null==n||null===(o=n.onTabsChange)||void 0===o||o.call(n,c),v.postMessage({action:"add_new_tab",id:e});return}if("add_new_tab"===e.data.action&&!a&&0===u){u=e.data.id;return}if("change"===e.data.action&&(t(t=>(null==n?void 0:n.merge)?n.merge(t,e.data.state):e.data.state),d=!0),"close"===e.data.action){if(!a)return;let t=c.indexOf(e.data.id);-1!==t&&(c.splice(t,1),null==n||null===(l=n.onTabsChange)||void 0===l||l.call(n,c))}"change_main"===e.data.action&&e.data.id===u&&(a=!0,c.splice(0,c.length,...e.data.tabs),null==n||null===(i=n.onBecomeMain)||void 0===i||i.call(n,u))},window.addEventListener("beforeunload",()=>{if(v.postMessage({action:"close",id:u}),a){if(1===c.length){v.close();return}let e=c.filter(e=>e!==u);v.postMessage({action:"change_main",id:e[0],tabs:e})}}),d||(v.postMessage({action:"sync"}),setTimeout(()=>{if(!d){var e;a=!0,d=!0,null==n||null===(e=n.onBecomeMain)||void 0===e||e.call(n,u)}},null!==(r=null==n?void 0:n.mainTimeout)&&void 0!==r?r:100)),l.setState=p,e(p,o,l)}},52810:function(e){e.exports={backdrop:"Backdrop_backdrop__A7yIC",darkMode:"Backdrop_darkMode__eqwkh",showBackdrop:"Backdrop_showBackdrop__xvyWm"}},84104:function(e){e.exports={toggleRadio:"Radio_toggleRadio__e5mia",toggleRadioLabel:"Radio_toggleRadioLabel__7E50Q",fstudio:"Radio_fstudio__vTo_j",labelRadioMedium:"Radio_labelRadioMedium__vLq0n",labelRadioLarge:"Radio_labelRadioLarge__HWjac",radio:"Radio_radio__VyvFZ"}},53700:function(e){e.exports={sheet:"Sheet_sheet__59S7D",body:"Sheet_body__VKc95",icon:"Sheet_icon__RnybF",darkMode:"Sheet_darkMode__ovTcg"}},79994:function(e){e.exports={up:"Swipeable_up__4gCst",down:"Swipeable_down__sD5uK",left:"Swipeable_left__KC_15",right:"Swipeable_right__7aupL",top:"Swipeable_top__7UYhG",swipeable:"Swipeable_swipeable__BTB2L"}}}]);